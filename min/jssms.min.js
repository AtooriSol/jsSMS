/*
 jsSMS - A Sega Master System/GameGear emulator in JavaScript
 Copyright (C) 2012  Guillaume Marty (https://github.com/gmarty)
 Based on JavaGear Copyright (c) 2002-2008 Chris White.

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
'use strict';var e=!0,g=null,h=!1;function aa(){return function(){}};function ba(b){this.tb={ui:ca,swfPath:"lib/"};if("undefined"!=typeof b)for(var a in this.tb)"undefined"!=typeof b[a]&&(this.tb[a]=b[a]);this.T=new da(this);this.Qa=new b.ui(this);this.w=new ga(this);this.wa=new ha(this);this.ports=new ia(this);this.C=new ja(this);this.Qa.updateStatus("Ready to load a ROM.")}
ba.prototype={Ia:h,Xa:0,L:0,rb:0,Da:0,Fa:0,Ka:h,aa:e,S:h,Na:e,Aa:[],Ba:0,Ma:0,xa:[],pb:0,ob:0,Ea:0,Bb:0,hb:"",ib:"",reset:function(){var b=this.w.lb,a=0;0==b||this.S?(this.Da=60,this.L=262,a=3579545):1==b&&(this.Da=50,this.L=313,a=3546893);this.Xa=Math.round(a/this.Da/this.L+1);this.w.lb=b;if(this.Na){b=this.wa;b.nb=(a<<8)/16/44100;b.M=0;b.G=0;b.ka=16;b.U=32768;for(a=0;4>a;a++)b.B[a<<1]=1,b.B[(a<<1)+1]=15,b.z[a]=0,b.J[a]=1,3!=a&&(b.ea[a]=ka);this.Ma=Math.round(44100/this.Da);if(0==this.Aa.length||
this.Aa.length!=this.Ma)this.Aa=Array(this.Ma);if(0==this.xa.length||this.xa.length!=this.L){this.xa=Array(this.L);for(var d=0,a=0;a<this.L;a++)b=(this.Ma<<16)/this.L+d,d=b-(b>>16<<16),this.xa[a]=b>>16}}this.Bb=0;this.Fa=this.rb;this.T.reset();this.Qa.reset();this.w.reset();this.ports.reset();this.C.reset();la(this.C,g)},start:function(){var b=this;this.Ia||(this.Ia=e);this.Cb=setInterval(function(){b.frame()},17);this.eb=g;this.Ea=0;ma(this);this.Ab=setInterval(function(){ma(b)},500)},stop:function(){clearInterval(this.Cb);
clearInterval(this.Ab);this.Ia=h},frame:function(){var b;for(b=0;b<this.L;b++){if(193==b){na(this.C,this.Xa,8);var a=this.w;a.status|=128;na(this.C,0,0)}else na(this.C,this.Xa,0);this.Na&&(a=b,0==a&&(this.Ba=0),a=this.xa[a],this.Aa=this.wa.update(this.Ba,a),this.Ba+=a);this.w.ha=b;if(0==this.Fa&&192>b){var d=this.w,a=b;if(!d.m.S||!(24>a||168<=a)){for(var c=d.W.length;0!=c--;)d.W[c]=h;if(0!=(d.t[1]&64)){if(-1!=d.ba){for(var c=d,f=c.ja;f<=c.ba;f++)if(c.ua[f]){c.ua[f]=h;for(var j=c.Pa[f],k=0,m=f<<5,
t=0;8>t;t++)for(var x=c.A[m++],s=c.A[m++],F=c.A[m++],y=c.A[m++],A=128;0!=A;A>>=1){var u=0;0!=(x&A)&&(u|=1);0!=(s&A)&&(u|=2);0!=(F&A)&&(u|=4);0!=(y&A)&&(u|=8);j[k++]=u}}c.ja=512;c.ba=-1}c=d;f=a;j=c.t[8];x=c.kb;16>f&&0!=(c.t[0]&64)&&(j=0);k=c.t[0]&128;m=32-(j>>3)+c.Ga;t=f+x>>3;27<t&&(t-=28);x=(f+(x&7)&7)<<3;s=f<<8;for(F=c.Ga;F<c.bb;F++){var ea=c.Va+((m&31)<<1)+(t<<6),y=c.A[ea+1],A=(y&8)<<1,u=(F<<3)+(j&7),za=0==(y&4)?x:56-x,ea=c.Pa[(c.A[ea]&255)+((y&1)<<8)];if(0==(y&2))for(var Z=0;8>Z&&256>u;Z++,u++){var fa=
ea[Z+za];c.pa[u]=0!=(y&16)&&0!=fa;c.display[u+s]=c.H[fa+A]}else for(Z=7;0<=Z&&256>u;Z--,u++)fa=ea[Z+za],c.pa[u]=0!=(y&16)&&0!=fa,c.display[u+s]=c.H[fa+A];m++;0!=k&&23==F&&(t=f>>3,x=(f&7)<<3)}if(d.R){c=d;c.R=h;for(f=0;f<c.ia.length;f++)c.ia[f][0]=0;f=0==(c.t[1]&2)?8:16;1==(c.t[1]&1)&&(f<<=1);for(j=0;64>j;j++){k=c.A[c.I+j]&255;if(208==k)break;k++;240<k&&(k-=256);for(m=0;192>m;m++)m>=k&&m-k<f&&(t=c.ia[m],8>t[0]&&(x=3*t[0]+1,s=c.I+(j<<1)+128,t[x++]=c.A[s++]&255,t[x++]=k,t[x++]=c.A[s]&255,t[0]++))}}if(0!=
d.ia[a][0]){c=d;f=a;j=c.ia[f];x=Math.min(8,j[0]);k=c.t[1]&1;m=f<<8;for(t=3*x;0!=x--;)if(F=j[t--]|(c.t[6]&4)<<6,y=j[t--],s=j[t--]-(c.t[0]&8),A=f-y>>k,0!=(c.t[1]&2)&&(F&=-2),F=c.Pa[F+((A&8)>>3)],y=0,0>s&&(y=-s,s=0),A=y+((A&7)<<3),0==k)for(;8>y&&256>s;y++,s++)u=F[A++],0!=u&&!c.pa[s]&&(c.display[s+m]=c.H[u+16],c.W[s]?c.status|=32:c.W[s]=e);else for(;8>y&&256>s;y++,s+=2)if(u=F[A++],0!=u&&!c.pa[s]&&(c.display[s+m]=c.H[u+16],c.W[s]?c.status|=32:c.W[s]=e),0!=u&&!c.pa[s+1])c.display[s+m+1]=c.H[u+16],c.W[s+
1]?c.status|=32:c.W[s+1]=e;8<=j[0]&&(c.status|=64)}if(d.m.aa&&0!=(d.t[0]&32)){c=d.H[16+(d.t[7]&15)];a<<=8;if(32<16+(d.t[7]&15))debugger;if(49152<a)debugger;d.display[a++]=c;d.display[a++]=c;d.display[a++]=c;d.display[a++]=c;d.display[a++]=c;d.display[a++]=c;d.display[a++]=c;d.display[a]=c}}else{c=d.H[16+(d.t[7]&15)];a<<=8;f=void 0;for(f=0;256>f;f++)d.display[a++]=c}}}a=this.w;d=b;if(192>=d){if(0==a.ra?(a.ra=a.t[10],a.status|=4):a.ra--,0!=(a.status&4)&&0!=(a.t[0]&16))a.m.C.Q=e}else if(a.ra=a.t[10],
0!=(a.status&128)&&(0!=(a.t[1]&32)&&224>d)&&(a.m.C.Q=e),d==a.m.L-1)a.kb=a.t[9]}this.Ka&&(b=this.C,b.P=b.O,b.O=h,b.ga&&(b.b++,b.ga=h),b.push(b.b),b.b=102,b.l-=11,this.Ka=h);0==this.Fa--?(this.Fa=this.rb,b=e):b=h;b&&this.Qa.yb(this.w.display,[]);this.Ea++},fb:function(b,a){0!=a%1024&&(b=b.substr(512),a-=512);var d,c,f=Math.round(a/1024),j=Array(f);for(d=0;d<f;d++){j[d]=Array(1024);for(c=0;1024>c;c++)j[d][c]=b.charCodeAt(1024*d+c)&255}return j}};
function oa(b,a,d){var c;c=".gg"===d.substr(-3).toLowerCase()?2:1;var f=a.length;1==c?(b.aa=e,b.S=h,b.w.Ga=0,b.w.bb=32,b.pb=256,b.ob=192):2==c&&(b.S=e,b.aa=h,b.w.Ga=5,b.w.bb=27,b.pb=160,b.ob=144);if(1024>=f)return h;c=b.fb(a,f);if(c==g)return h;la(b.C,c);b.hb=a;b.ib=d;return e}function ma(b){var a=+new Date,d="Running";b.eb&&(d+=": "+(b.Ea/((a-b.eb)/1E3)).toFixed(2)+" (/ "+(1E3/17).toFixed(2)+") FPS");b.Qa.updateStatus(d);b.Ea=0;b.eb=a};function pa(b){if(void 0===b)return[];for(var a=b.length,d=Array(a);a--;)"undefined"!=typeof b[a]&&(d[a]=b[a]);return d}function qa(b){var a=h;b.some(function(b){return b in document?(a=b,e):h});return a};var ra=[4,10,7,6,4,4,7,4,4,11,7,6,4,4,7,4,8,10,7,6,4,4,7,4,12,11,7,6,4,4,7,4,7,10,16,6,4,4,7,4,7,11,16,6,4,4,7,4,7,10,13,6,11,11,10,4,7,11,13,6,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,7,7,7,7,7,7,4,7,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,5,10,10,10,10,11,7,11,5,10,10,0,10,17,7,11,5,10,10,11,10,11,7,11,5,4,10,11,10,0,7,11,5,10,10,
19,10,11,7,11,5,4,10,4,10,0,7,11,5,10,10,4,10,11,7,11,5,6,10,4,10,0,7,11],sa=[8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,
8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8],ta=[4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,14,20,10,8,8,11,4,4,15,20,10,8,8,11,4,4,4,4,4,23,23,19,4,4,15,4,4,4,4,4,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,8,8,8,8,8,8,19,8,8,8,8,8,8,8,19,8,19,19,19,19,19,19,4,19,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,
4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,14,4,23,4,15,4,4,4,8,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,10,4,4,4,4,4,4],ua=[0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,
0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0],va=[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,18,8,12,15,20,8,14,8,
8,12,12,15,20,8,14,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];
function ja(b){this.m=b;this.port=b.ports;this.sa=this.k=this.b=0;this.Q=this.na=this.ga=this.P=this.O=h;this.l=this.wb=this.$a=this.a=this.Ha=this.ub=this.q=this.o=this.p=this.n=this.cb=this.ab=this.f=this.i=this.Za=this.Ya=this.g=this.h=this.Wa=this.Ua=this.d=this.e=this.Ta=this.c=this.ta=0;this.V=[];this.gb=Array(8);this.Oa=g;this.xb=h;this.$=Array(4);this.da=0;this.ca=Array(65);this.D=Array(65);this.Hb=Array(1024);this.Ra=[];this.za=[];this.j=[];this.Y=[];this.X=[];this.v=[];this.u=[];this.oa=
[];this.za=Array(256);this.j=Array(256);this.Y=Array(256);this.X=Array(256);this.oa=Array(256);for(b=0;256>b;b++){var a=0!=(b&128)?128:0,d=0==b?64:0,c=b&32,f=b&8,j=wa(b)?4:0;this.za[b]=a|d|c|f;this.j[b]=a|d|c|f|j;this.Y[b]=a|d|c|f;this.Y[b]|=128==b?4:0;this.Y[b]|=0==(b&15)?16:0;this.X[b]=a|d|c|f|2;this.X[b]|=127==b?4:0;this.X[b]|=15==(b&15)?16:0;this.oa[b]=0!=b?b&128:68;this.oa[b]|=c|f|16}this.v=Array(131072);this.u=Array(131072);b=0;a=65536;d=0;c=65536;for(f=0;256>f;f++)for(j=0;256>j;j++){var k=
j-f;this.v[b]=0!=j?0!=(j&128)?128:0:64;this.v[b]|=j&40;(j&15)<(f&15)&&(this.v[b]|=16);j<f&&(this.v[b]|=1);0!=((k^f^128)&(k^j)&128)&&(this.v[b]|=4);b++;k=j-f-1;this.v[a]=0!=j?0!=(j&128)?128:0:64;this.v[a]|=j&40;(j&15)<=(f&15)&&(this.v[a]|=16);j<=f&&(this.v[a]|=1);0!=((k^f^128)&(k^j)&128)&&(this.v[a]|=4);a++;k=f-j;this.u[d]=0!=j?0!=(j&128)?130:2:66;this.u[d]|=j&40;(j&15)>(f&15)&&(this.u[d]|=16);j>f&&(this.u[d]|=1);0!=((k^f)&(f^j)&128)&&(this.u[d]|=4);d++;k=f-j-1;this.u[c]=0!=j?0!=(j&128)?130:2:66;this.u[c]|=
j&40;(j&15)>=(f&15)&&(this.u[c]|=16);j>=f&&(this.u[c]|=1);0!=((k^f)&(f^j)&128)&&(this.u[c]|=4);c++}this.Ra=Array(2048);for(b=256;0!=b--;)for(a=0;1>=a;a++)for(d=0;1>=d;d++)for(c=0;1>=c;c++){f=this.Ra;j=a<<8|c<<9|d<<10|b;k=a|c<<1|d<<4;this.c=b;this.a=k;var m=this.c,t=0,x=k&1,s=x;if(0!=(k&16)||9<(m&15))t|=6;if(1==x||159<m||143<m&&9<(m&15))t|=96,s=1;153<m&&(s=1);0!=(k&2)?i(this,t):l(this,t);k=this.a&254|s;k=wa(this.c)?k&251|4:k&251;f[j]=this.c|k<<8}for(b=this.c=this.a=0;65>b;b++)this.D[b]=Array(1024),
this.ca[b]=Array(1024);for(b=0;8>b;b++)this.gb[b]=Array(1024);this.Oa==g&&(this.Oa=Array(32),this.xb=h);this.D[64]=Array(1024);this.ca[64]=Array(1024);this.da=2}
ja.prototype={reset:function(){this.b=this.$a=this.a=this.Ha=this.ub=this.o=this.q=this.n=this.p=this.i=this.f=this.ab=this.cb=this.h=this.g=this.Ya=this.Za=this.e=this.d=this.Ua=this.Wa=this.c=this.Ta=0;this.k=57328;this.sa=this.wb=this.l=0;this.na=this.P=this.O=h;this.ta=0;this.ga=h},call:function(b){b?(this.push(this.b+2),this.b=n(this,this.b),this.l-=7):this.b+=2},push:function(b,a){"undefined"===typeof a?(o(this,--this.k,b>>8),o(this,--this.k,b&255)):(o(this,--this.k,b),o(this,--this.k,a))},
page:function(b,a){var d,c;this.$[b]=a;switch(b){case 0:if(0!=(a&8)){d=(a&4)<<2;for(c=32;48>c;c++)this.D[c]=pa(this.Oa[d]),this.ca[c]=pa(this.Oa[d]),d++;this.xb=e}else{d=this.$[3]%this.da<<4;for(c=32;48>c;c++)this.D[c]=pa(this.V[d++]),this.ca[c]=Array(1024)}break;case 1:d=(a%this.da<<4)+1;for(c=1;16>c;c++)this.D[c]=pa(this.V[d++]);break;case 2:d=a%this.da<<4;for(c=16;32>c;c++)this.D[c]=pa(this.V[d++]);break;case 3:if(0==(this.$[0]&8)){d=a%this.da<<4;for(c=32;48>c;c++)this.D[c]=pa(this.V[d++])}}}};
function n(b,a){return b.D[a>>10][a&1023]&255|(b.D[++a>>10][a&1023]&255)<<8}function p(b){return b.D[b.b>>10][b.b&1023]}function q(b,a){return b.D[a>>10][a&1023]&255}function o(b,a,d){b.ca[a>>10][a&1023]=d;65532<=a&&b.page(a&3,d)}function la(b,a){a!=g&&(b.V=a);b.$[0]=0;b.$[1]=0;b.$[2]=1;b.$[3]=0;if(b.V!=g){b.da=b.V.length/16;for(var d=0;48>d;d++)b.D[d]=pa(b.V[d&31]),b.ca[d]=Array(1024);for(d=48;64>d;d++)b.D[d]=b.gb[d&7],b.ca[d]=b.gb[d&7]}else b.da=0}
function wa(b){for(var a=e,d=0;8>d;d++)0!=(b&1<<d)&&(a=!a);return a}function xa(b,a){var d=b.i<<8|b.f,c=d-a-(b.a&1);b.a=(d^c^a)>>8&16|2|c>>16&1|c>>8&128|(0!=(c&65535)?0:64)|((a^d)&(d^c)&32768)>>13;b.i=c>>8&255;b.f=c&255}function ya(b,a){var d=b.i<<8|b.f,c=d+a+(b.a&1);b.a=(d^c^a)>>8&16|c>>16&1|c>>8&128|(0!=(c&65535)?0:64)|((a^d^32768)&(a^c)&32768)>>13;b.i=c>>8&255;b.f=c&255}function r(b,a,d){var c=a+d;b.a=b.a&196|(a^c^d)>>8&16|c>>16&1;return c&65535}
function v(b,a){a=a-1&255;b.a=b.a&1|b.X[a];return a}function w(b,a){a=a+1&255;b.a=b.a&1|b.Y[a];return a}function z(b){b.f=b.f-1&255;255==b.f&&(b.i=b.i-1&255)}function Aa(b){b.g=b.g-1&255;255==b.g&&(b.h=b.h-1&255)}function B(b){b.d=b.d-1&255;255==b.d&&(b.e=b.e-1&255)}function C(b){b.f=b.f+1&255;0==b.f&&(b.i=b.i+1&255)}function Ba(b){b.g=b.g+1&255;0==b.g&&(b.h=b.h+1&255)}function Ca(b,a){b.q=a>>8;b.o=a&255}function Da(b,a){b.p=a>>8;b.n=a&255}function Ea(b,a){b.i=a>>8;b.f=a&255}
function D(b){return b.q<<8|b.o}function E(b){return b.p<<8|b.n}function G(b){return b.i<<8|b.f}function H(b){return b.h<<8|b.g}function I(b){return b.e<<8|b.d}function J(b,a){b.a=b.u[b.c<<8|b.c-a&255]}function K(b,a){var d=b.a&1,c=b.c-a-d&255;b.a=b.u[d<<16|b.c<<8|c];b.c=c}function i(b,a){var d=b.c-a&255;b.a=b.u[b.c<<8|d];b.c=d}function L(b,a){var d=b.a&1,c=b.c+a+d&255;b.a=b.v[d<<16|b.c<<8|c];b.c=c}function l(b,a){var d=b.c+a&255;b.a=b.v[b.c<<8|d];b.c=d}
function Fa(b,a){var d=a+p(b)&65535,c=q(b,++b.b);b.l-=ua[c];switch(c){case 6:o(b,d,M(b,q(b,d)));break;case 14:o(b,d,N(b,q(b,d)));break;case 22:o(b,d,O(b,q(b,d)));break;case 30:o(b,d,P(b,q(b,d)));break;case 38:o(b,d,Q(b,q(b,d)));break;case 46:o(b,d,R(b,q(b,d)));break;case 54:o(b,d,S(b,q(b,d)));break;case 62:o(b,d,T(b,q(b,d)));break;case 70:U(b,q(b,d)&1);break;case 78:U(b,q(b,d)&2);break;case 86:U(b,q(b,d)&4);break;case 94:U(b,q(b,d)&8);break;case 102:U(b,q(b,d)&16);break;case 110:U(b,q(b,d)&32);break;
case 118:U(b,q(b,d)&64);break;case 126:U(b,q(b,d)&128);break;case 134:o(b,d,q(b,d)&-2);break;case 142:o(b,d,q(b,d)&-3);break;case 150:o(b,d,q(b,d)&-5);break;case 158:o(b,d,q(b,d)&-9);break;case 166:o(b,d,q(b,d)&-17);break;case 174:o(b,d,q(b,d)&-33);break;case 182:o(b,d,q(b,d)&-65);break;case 190:o(b,d,q(b,d)&-129);break;case 198:o(b,d,q(b,d)|1);break;case 206:o(b,d,q(b,d)|2);break;case 214:o(b,d,q(b,d)|4);break;case 222:o(b,d,q(b,d)|8);break;case 230:o(b,d,q(b,d)|16);break;case 238:o(b,d,q(b,d)|32);
break;case 246:o(b,d,q(b,d)|64);break;case 254:o(b,d,q(b,d)|128)}b.b++}function U(b,a){b.a=b.a&1|b.oa[a]}function T(b,a){var d=a&1,a=a>>1&255;b.a=d|b.j[a];return a}function R(b,a){var d=a&1,a=a>>1|a&128;b.a=d|b.j[a];return a}function S(b,a){var d=(a&128)>>7,a=(a<<1|1)&255;b.a=d|b.j[a];return a}function Q(b,a){var d=(a&128)>>7,a=a<<1&255;b.a=d|b.j[a];return a}function P(b,a){var d=a&1,a=(a>>1|b.a<<7)&255;b.a=d|b.j[a];return a}
function O(b,a){var d=(a&128)>>7,a=(a<<1|b.a&1)&255;b.a=d|b.j[a];return a}function N(b,a){var d=a&1,a=(a>>1|a<<7)&255;b.a=d|b.j[a];return a}function M(b,a){var d=(a&128)>>7,a=(a<<1|a>>7)&255;b.a=d|b.j[a];return a}function Ga(b,a){o(b,a,v(b,q(b,a)))}function Ha(b,a){o(b,a,w(b,q(b,a)))}function V(b,a){a&&(b.b=n(b,b.k),b.k+=2,b.l-=6)}function Ia(b,a){if(a){var d=p(b)+1;b.b+=128>d?d:d-256;b.l-=5}else b.b++}function W(b,a){b.b=a?n(b,b.b):b.b+2}
function na(b,a,d){b.l+=a;0!=a&&(b.wb=a);for(;b.l>d;){if(b.Q&&(a=b,a.O&&!a.na))(a.ga&&(a.b++,a.ga=h),a.O=a.P=h,a.Q=h,a.push(a.b),0==a.sa)?(a.b=0==a.ta||255==a.ta?56:a.ta,a.l-=13):1==a.sa?(a.b=56,a.l-=13):(a.b=n(a,(a.Ha<<8)+a.ta),a.l-=19);a=q(b,b.b++);b.na=h;b.l-=ra[a];switch(a){case 1:b.d=q(b,b.b++);b.e=q(b,b.b++);break;case 2:o(b,I(b),b.c);break;case 3:a=b;a.d=a.d+1&255;0==a.d&&(a.e=a.e+1&255);break;case 4:b.e=w(b,b.e);break;case 5:b.e=v(b,b.e);break;case 6:b.e=q(b,b.b++);break;case 7:var a=b,c=
a.c>>7;a.c=a.c<<1&255|c;a.a=a.a&236|c;break;case 8:a=b;c=a.c;a.c=a.Ta;a.Ta=c;c=a.a;a.a=a.$a;a.$a=c;break;case 9:Ea(b,r(b,G(b),I(b)));break;case 10:b.c=q(b,I(b));break;case 11:B(b);break;case 12:b.d=w(b,b.d);break;case 13:b.d=v(b,b.d);break;case 14:b.d=q(b,b.b++);break;case 15:a=b;c=a.c&1;a.c=a.c>>1|c<<7;a.a=a.a&236|c;break;case 16:b.e=b.e-1&255;Ia(b,0!=b.e);break;case 17:b.g=q(b,b.b++);b.h=q(b,b.b++);break;case 18:o(b,H(b),b.c);break;case 19:Ba(b);break;case 20:b.h=w(b,b.h);break;case 21:b.h=v(b,
b.h);break;case 22:b.h=q(b,b.b++);break;case 23:a=b;c=a.c>>7;a.c=(a.c<<1|a.a&1)&255;a.a=a.a&236|c;break;case 24:b.b+=p(b)+1;break;case 25:Ea(b,r(b,G(b),H(b)));break;case 26:b.c=q(b,H(b));break;case 27:Aa(b);break;case 28:b.g=w(b,b.g);break;case 29:b.g=v(b,b.g);break;case 30:b.g=q(b,b.b++);break;case 31:a=b;c=a.c&1;a.c=(a.c>>1|(a.a&1)<<7)&255;a.a=a.a&236|c;break;case 32:Ia(b,0==(b.a&64));break;case 33:b.f=q(b,b.b++);b.i=q(b,b.b++);break;case 34:a=n(b,b.b);o(b,a,b.f);o(b,++a,b.i);b.b+=2;break;case 35:C(b);
break;case 36:b.i=w(b,b.i);break;case 37:b.i=v(b,b.i);break;case 38:b.i=q(b,b.b++);break;case 39:a=b;c=a.Ra[a.c|(a.a&1)<<8|(a.a&2)<<8|(a.a&16)<<6];a.c=c&255;a.a=a.a&2|c>>8;break;case 40:Ia(b,0!=(b.a&64));break;case 41:Ea(b,r(b,G(b),G(b)));break;case 42:a=n(b,b.b);b.f=q(b,a);b.i=q(b,a+1);b.b+=2;break;case 43:z(b);break;case 44:b.f=w(b,b.f);break;case 45:b.f=v(b,b.f);break;case 46:b.f=q(b,b.b++);break;case 47:a=b;a.c^=255;a.a|=18;break;case 48:Ia(b,0==(b.a&1));break;case 49:b.k=n(b,b.b);b.b+=2;break;
case 50:o(b,n(b,b.b),b.c);b.b+=2;break;case 51:b.k++;break;case 52:Ha(b,G(b));break;case 53:Ga(b,G(b));break;case 54:o(b,G(b),q(b,b.b++));break;case 55:b.a|=1;b.a&=-3;b.a&=-17;break;case 56:Ia(b,0!=(b.a&1));break;case 57:Ea(b,r(b,G(b),b.k));break;case 58:b.c=q(b,n(b,b.b));b.b+=2;break;case 59:b.k--;break;case 60:b.c=w(b,b.c);break;case 61:b.c=v(b,b.c);break;case 62:b.c=q(b,b.b++);break;case 63:a=b;0!=(a.a&1)?(a.a&=-2,a.a|=16):(a.a|=1,a.a&=-17);a.a&=-3;break;case 65:b.e=b.d;break;case 66:b.e=b.h;break;
case 67:b.e=b.g;break;case 68:b.e=b.i;break;case 69:b.e=b.f;break;case 70:b.e=q(b,G(b));break;case 71:b.e=b.c;break;case 72:b.d=b.e;break;case 74:b.d=b.h;break;case 75:b.d=b.g;break;case 76:b.d=b.i;break;case 77:b.d=b.f;break;case 78:b.d=q(b,G(b));break;case 79:b.d=b.c;break;case 80:b.h=b.e;break;case 81:b.h=b.d;break;case 83:b.h=b.g;break;case 84:b.h=b.i;break;case 85:b.h=b.f;break;case 86:b.h=q(b,G(b));break;case 87:b.h=b.c;break;case 88:b.g=b.e;break;case 89:b.g=b.d;break;case 90:b.g=b.h;break;
case 92:b.g=b.i;break;case 93:b.g=b.f;break;case 94:b.g=q(b,G(b));break;case 95:b.g=b.c;break;case 96:b.i=b.e;break;case 97:b.i=b.d;break;case 98:b.i=b.h;break;case 99:b.i=b.g;break;case 101:b.i=b.f;break;case 102:b.i=q(b,G(b));break;case 103:b.i=b.c;break;case 104:b.f=b.e;break;case 105:b.f=b.d;break;case 106:b.f=b.h;break;case 107:b.f=b.g;break;case 108:b.f=b.i;break;case 110:b.f=q(b,G(b));break;case 111:b.f=b.c;break;case 112:o(b,G(b),b.e);break;case 113:o(b,G(b),b.d);break;case 114:o(b,G(b),b.h);
break;case 115:o(b,G(b),b.g);break;case 116:o(b,G(b),b.i);break;case 117:o(b,G(b),b.f);break;case 118:b.ga=e;b.b--;break;case 119:o(b,G(b),b.c);break;case 120:b.c=b.e;break;case 121:b.c=b.d;break;case 122:b.c=b.h;break;case 123:b.c=b.g;break;case 124:b.c=b.i;break;case 125:b.c=b.f;break;case 126:b.c=q(b,G(b));break;case 128:l(b,b.e);break;case 129:l(b,b.d);break;case 130:l(b,b.h);break;case 131:l(b,b.g);break;case 132:l(b,b.i);break;case 133:l(b,b.f);break;case 134:l(b,q(b,G(b)));break;case 135:l(b,
b.c);break;case 136:L(b,b.e);break;case 137:L(b,b.d);break;case 138:L(b,b.h);break;case 139:L(b,b.g);break;case 140:L(b,b.i);break;case 141:L(b,b.f);break;case 142:L(b,q(b,G(b)));break;case 143:L(b,b.c);break;case 144:i(b,b.e);break;case 145:i(b,b.d);break;case 146:i(b,b.h);break;case 147:i(b,b.g);break;case 148:i(b,b.i);break;case 149:i(b,b.f);break;case 150:i(b,q(b,G(b)));break;case 151:i(b,b.c);break;case 152:K(b,b.e);break;case 153:K(b,b.d);break;case 154:K(b,b.h);break;case 155:K(b,b.g);break;
case 156:K(b,b.i);break;case 157:K(b,b.f);break;case 158:K(b,q(b,G(b)));break;case 159:K(b,b.c);break;case 160:b.a=b.j[b.c&=b.e]|16;break;case 161:b.a=b.j[b.c&=b.d]|16;break;case 162:b.a=b.j[b.c&=b.h]|16;break;case 163:b.a=b.j[b.c&=b.g]|16;break;case 164:b.a=b.j[b.c&=b.i]|16;break;case 165:b.a=b.j[b.c&=b.f]|16;break;case 166:b.a=b.j[b.c&=q(b,G(b))]|16;break;case 167:b.a=b.j[b.c]|16;break;case 168:b.a=b.j[b.c^=b.e];break;case 169:b.a=b.j[b.c^=b.d];break;case 170:b.a=b.j[b.c^=b.h];break;case 171:b.a=
b.j[b.c^=b.g];break;case 172:b.a=b.j[b.c^=b.i];break;case 173:b.a=b.j[b.c^=b.f];break;case 174:b.a=b.j[b.c^=q(b,G(b))];break;case 175:b.a=b.j[b.c=0];break;case 176:b.a=b.j[b.c|=b.e];break;case 177:b.a=b.j[b.c|=b.d];break;case 178:b.a=b.j[b.c|=b.h];break;case 179:b.a=b.j[b.c|=b.g];break;case 180:b.a=b.j[b.c|=b.i];break;case 181:b.a=b.j[b.c|=b.f];break;case 182:b.a=b.j[b.c|=q(b,G(b))];break;case 183:b.a=b.j[b.c];break;case 184:J(b,b.e);break;case 185:J(b,b.d);break;case 186:J(b,b.h);break;case 187:J(b,
b.g);break;case 188:J(b,b.i);break;case 189:J(b,b.f);break;case 190:J(b,q(b,G(b)));break;case 191:J(b,b.c);break;case 192:V(b,0==(b.a&64));break;case 193:a=b;c=n(b,b.k);a.e=c>>8;a.d=c&255;b.k+=2;break;case 194:W(b,0==(b.a&64));break;case 195:b.b=n(b,b.b);break;case 196:b.call(0==(b.a&64));break;case 197:b.push(b.e,b.d);break;case 198:l(b,q(b,b.b++));break;case 199:b.push(b.b);b.b=0;break;case 200:V(b,0!=(b.a&64));break;case 201:b.b=n(b,b.k);b.k+=2;break;case 202:W(b,0!=(b.a&64));break;case 203:a=
b;c=q(b,b.b++);a.l-=sa[c];switch(c){case 0:a.e=M(a,a.e);break;case 1:a.d=M(a,a.d);break;case 2:a.h=M(a,a.h);break;case 3:a.g=M(a,a.g);break;case 4:a.i=M(a,a.i);break;case 5:a.f=M(a,a.f);break;case 6:o(a,G(a),M(a,q(a,G(a))));break;case 7:a.c=M(a,a.c);break;case 8:a.e=N(a,a.e);break;case 9:a.d=N(a,a.d);break;case 10:a.h=N(a,a.h);break;case 11:a.g=N(a,a.g);break;case 12:a.i=N(a,a.i);break;case 13:a.f=N(a,a.f);break;case 14:o(a,G(a),N(a,q(a,G(a))));break;case 15:a.c=N(a,a.c);break;case 16:a.e=O(a,a.e);
break;case 17:a.d=O(a,a.d);break;case 18:a.h=O(a,a.h);break;case 19:a.g=O(a,a.g);break;case 20:a.i=O(a,a.i);break;case 21:a.f=O(a,a.f);break;case 22:o(a,G(a),O(a,q(a,G(a))));break;case 23:a.c=O(a,a.c);break;case 24:a.e=P(a,a.e);break;case 25:a.d=P(a,a.d);break;case 26:a.h=P(a,a.h);break;case 27:a.g=P(a,a.g);break;case 28:a.i=P(a,a.i);break;case 29:a.f=P(a,a.f);break;case 30:o(a,G(a),P(a,q(a,G(a))));break;case 31:a.c=P(a,a.c);break;case 32:a.e=Q(a,a.e);break;case 33:a.d=Q(a,a.d);break;case 34:a.h=
Q(a,a.h);break;case 35:a.g=Q(a,a.g);break;case 36:a.i=Q(a,a.i);break;case 37:a.f=Q(a,a.f);break;case 38:o(a,G(a),Q(a,q(a,G(a))));break;case 39:a.c=Q(a,a.c);break;case 40:a.e=R(a,a.e);break;case 41:a.d=R(a,a.d);break;case 42:a.h=R(a,a.h);break;case 43:a.g=R(a,a.g);break;case 44:a.i=R(a,a.i);break;case 45:a.f=R(a,a.f);break;case 46:o(a,G(a),R(a,q(a,G(a))));break;case 47:a.c=R(a,a.c);break;case 48:a.e=S(a,a.e);break;case 49:a.d=S(a,a.d);break;case 50:a.h=S(a,a.h);break;case 51:a.g=S(a,a.g);break;case 52:a.i=
S(a,a.i);break;case 53:a.f=S(a,a.f);break;case 54:o(a,G(a),S(a,q(a,G(a))));break;case 55:a.c=S(a,a.c);break;case 56:a.e=T(a,a.e);break;case 57:a.d=T(a,a.d);break;case 58:a.h=T(a,a.h);break;case 59:a.g=T(a,a.g);break;case 60:a.i=T(a,a.i);break;case 61:a.f=O(a,a.f);break;case 62:o(a,G(a),T(a,q(a,G(a))));break;case 63:a.c=T(a,a.c);break;case 64:U(a,a.e&1);break;case 65:U(a,a.d&1);break;case 66:U(a,a.h&1);break;case 67:U(a,a.g&1);break;case 68:U(a,a.i&1);break;case 69:U(a,a.f&1);break;case 70:U(a,q(a,
G(a))&1);break;case 71:U(a,a.c&1);break;case 72:U(a,a.e&2);break;case 73:U(a,a.d&2);break;case 74:U(a,a.h&2);break;case 75:U(a,a.g&2);break;case 76:U(a,a.i&2);break;case 77:U(a,a.f&2);break;case 78:U(a,q(a,G(a))&2);break;case 79:U(a,a.c&2);break;case 80:U(a,a.e&4);break;case 81:U(a,a.d&4);break;case 82:U(a,a.h&4);break;case 83:U(a,a.g&4);break;case 84:U(a,a.i&4);break;case 85:U(a,a.f&4);break;case 86:U(a,q(a,G(a))&4);break;case 87:U(a,a.c&4);break;case 88:U(a,a.e&8);break;case 89:U(a,a.d&8);break;
case 90:U(a,a.h&8);break;case 91:U(a,a.g&8);break;case 92:U(a,a.i&8);break;case 93:U(a,a.f&8);break;case 94:U(a,q(a,G(a))&8);break;case 95:U(a,a.c&8);break;case 96:U(a,a.e&16);break;case 97:U(a,a.d&16);break;case 98:U(a,a.h&16);break;case 99:U(a,a.g&16);break;case 100:U(a,a.i&16);break;case 101:U(a,a.f&16);break;case 102:U(a,q(a,G(a))&16);break;case 103:U(a,a.c&16);break;case 104:U(a,a.e&32);break;case 105:U(a,a.d&32);break;case 106:U(a,a.h&32);break;case 107:U(a,a.g&32);break;case 108:U(a,a.i&32);
break;case 109:U(a,a.f&32);break;case 110:U(a,q(a,G(a))&32);break;case 111:U(a,a.c&32);break;case 112:U(a,a.e&64);break;case 113:U(a,a.d&64);break;case 114:U(a,a.h&64);break;case 115:U(a,a.g&64);break;case 116:U(a,a.i&64);break;case 117:U(a,a.f&64);break;case 118:U(a,q(a,G(a))&64);break;case 119:U(a,a.c&64);break;case 120:U(a,a.e&128);break;case 121:U(a,a.d&128);break;case 122:U(a,a.h&128);break;case 123:U(a,a.g&128);break;case 124:U(a,a.i&128);break;case 125:U(a,a.f&128);break;case 126:U(a,q(a,G(a))&
128);break;case 127:U(a,a.c&128);break;case 128:a.e&=-2;break;case 129:a.d&=-2;break;case 130:a.h&=-2;break;case 131:a.g&=-2;break;case 132:a.i&=-2;break;case 133:a.f&=-2;break;case 134:o(a,G(a),q(a,G(a))&-2);break;case 135:a.c&=-2;break;case 136:a.e&=-3;break;case 137:a.d&=-3;break;case 138:a.h&=-3;break;case 139:a.g&=-3;break;case 140:a.i&=-3;break;case 141:a.f&=-3;break;case 142:o(a,G(a),q(a,G(a))&-3);break;case 143:a.c&=-3;break;case 144:a.e&=-5;break;case 145:a.d&=-5;break;case 146:a.h&=-5;break;
case 147:a.g&=-5;break;case 148:a.i&=-5;break;case 149:a.f&=-5;break;case 150:o(a,G(a),q(a,G(a))&-5);break;case 151:a.c&=-5;break;case 152:a.e&=-9;break;case 153:a.d&=-9;break;case 154:a.h&=-9;break;case 155:a.g&=-9;break;case 156:a.i&=-9;break;case 157:a.f&=-9;break;case 158:o(a,G(a),q(a,G(a))&-9);break;case 159:a.c&=-9;break;case 160:a.e&=-17;break;case 161:a.d&=-17;break;case 162:a.h&=-17;break;case 163:a.g&=-17;break;case 164:a.i&=-17;break;case 165:a.f&=-17;break;case 166:o(a,G(a),q(a,G(a))&
-17);break;case 167:a.c&=-17;break;case 168:a.e&=-33;break;case 169:a.d&=-33;break;case 170:a.h&=-33;break;case 171:a.g&=-33;break;case 172:a.i&=-33;break;case 173:a.f&=-33;break;case 174:o(a,G(a),q(a,G(a))&-33);break;case 175:a.c&=-33;break;case 176:a.e&=-65;break;case 177:a.d&=-65;break;case 178:a.h&=-65;break;case 179:a.g&=-65;break;case 180:a.i&=-65;break;case 181:a.f&=-65;break;case 182:o(a,G(a),q(a,G(a))&-65);break;case 183:a.c&=-65;break;case 184:a.e&=-129;break;case 185:a.d&=-129;break;case 186:a.h&=
-129;break;case 187:a.g&=-129;break;case 188:a.i&=-129;break;case 189:a.f&=-129;break;case 190:o(a,G(a),q(a,G(a))&-129);break;case 191:a.c&=-129;break;case 192:a.e|=1;break;case 193:a.d|=1;break;case 194:a.h|=1;break;case 195:a.g|=1;break;case 196:a.i|=1;break;case 197:a.f|=1;break;case 198:o(a,G(a),q(a,G(a))|1);break;case 199:a.c|=1;break;case 200:a.e|=2;break;case 201:a.d|=2;break;case 202:a.h|=2;break;case 203:a.g|=2;break;case 204:a.i|=2;break;case 205:a.f|=2;break;case 206:o(a,G(a),q(a,G(a))|
2);break;case 207:a.c|=2;break;case 208:a.e|=4;break;case 209:a.d|=4;break;case 210:a.h|=4;break;case 211:a.g|=4;break;case 212:a.i|=4;break;case 213:a.f|=4;break;case 214:o(a,G(a),q(a,G(a))|4);break;case 215:a.c|=4;break;case 216:a.e|=8;break;case 217:a.d|=8;break;case 218:a.h|=8;break;case 219:a.g|=8;break;case 220:a.i|=8;break;case 221:a.f|=8;break;case 222:o(a,G(a),q(a,G(a))|8);break;case 223:a.c|=8;break;case 224:a.e|=16;break;case 225:a.d|=16;break;case 226:a.h|=16;break;case 227:a.g|=16;break;
case 228:a.i|=16;break;case 229:a.f|=16;break;case 230:o(a,G(a),q(a,G(a))|16);break;case 231:a.c|=16;break;case 232:a.e|=32;break;case 233:a.d|=32;break;case 234:a.h|=32;break;case 235:a.g|=32;break;case 236:a.i|=32;break;case 237:a.f|=32;break;case 238:o(a,G(a),q(a,G(a))|32);break;case 239:a.c|=32;break;case 240:a.e|=64;break;case 241:a.d|=64;break;case 242:a.h|=64;break;case 243:a.g|=64;break;case 244:a.i|=64;break;case 245:a.f|=64;break;case 246:o(a,G(a),q(a,G(a))|64);break;case 247:a.c|=64;break;
case 248:a.e|=128;break;case 249:a.d|=128;break;case 250:a.h|=128;break;case 251:a.g|=128;break;case 252:a.i|=128;break;case 253:a.f|=128;break;case 254:o(a,G(a),q(a,G(a))|128);break;case 255:a.c|=128}break;case 204:b.call(0!=(b.a&64));break;case 205:b.push(b.b+2);b.b=n(b,b.b);break;case 206:L(b,q(b,b.b++));break;case 207:b.push(b.b);b.b=8;break;case 208:V(b,0==(b.a&1));break;case 209:a=b;c=n(b,b.k);a.h=c>>8;a.g=c&255;b.k+=2;break;case 210:W(b,0==(b.a&1));break;case 211:X(b.port,q(b,b.b++),b.c);break;
case 212:b.call(0==(b.a&1));break;case 213:b.push(b.h,b.g);break;case 214:i(b,q(b,b.b++));break;case 215:b.push(b.b);b.b=16;break;case 216:V(b,0!=(b.a&1));break;case 217:a=b;c=a.e;a.e=a.Ua;a.Ua=c;c=a.d;a.d=a.Wa;a.Wa=c;a=b;c=a.h;a.h=a.Ya;a.Ya=c;c=a.g;a.g=a.Za;a.Za=c;a=b;c=a.i;a.i=a.ab;a.ab=c;c=a.f;a.f=a.cb;a.cb=c;break;case 218:W(b,0!=(b.a&1));break;case 219:b.c=Y(b.port,q(b,b.b++));break;case 220:b.call(0!=(b.a&1));break;case 221:a=b;c=q(b,b.b++);a.l-=ta[c];switch(c){case 9:Da(a,r(a,E(a),I(a)));break;
case 25:Da(a,r(a,E(a),H(a)));break;case 33:Da(a,n(a,a.b));a.b+=2;break;case 34:c=n(a,a.b);o(a,c++,a.n);o(a,c,a.p);a.b+=2;break;case 35:a.n=a.n+1&255;0==a.n&&(a.p=a.p+1&255);break;case 36:a.p=w(a,a.p);break;case 37:a.p=v(a,a.p);break;case 38:a.p=q(a,a.b++);break;case 41:Da(a,r(a,E(a),E(a)));break;case 42:c=n(a,a.b);a.n=q(a,c);a.p=q(a,++c);a.b+=2;break;case 43:a.n=a.n-1&255;255==a.n&&(a.p=a.p-1&255);break;case 44:a.n=w(a,a.n);break;case 45:a.n=v(a,a.n);break;case 46:a.n=q(a,a.b++);break;case 52:Ha(a,
E(a)+p(a));a.b++;break;case 53:Ga(a,E(a)+p(a));a.b++;break;case 54:o(a,E(a)+p(a),q(a,++a.b));a.b++;break;case 57:Da(a,r(a,E(a),a.k));break;case 68:a.e=a.p;break;case 69:a.e=a.n;break;case 70:a.e=q(a,E(a)+p(a));a.b++;break;case 76:a.d=a.p;break;case 77:a.d=a.n;break;case 78:a.d=q(a,E(a)+p(a));a.b++;break;case 84:a.h=a.p;break;case 85:a.h=a.n;break;case 86:a.h=q(a,E(a)+p(a));a.b++;break;case 92:a.g=a.p;break;case 93:a.g=a.n;break;case 94:a.g=q(a,E(a)+p(a));a.b++;break;case 96:a.p=a.e;break;case 97:a.p=
a.d;break;case 98:a.p=a.h;break;case 99:a.p=a.g;break;case 100:break;case 101:a.p=a.n;break;case 102:a.i=q(a,E(a)+p(a));a.b++;break;case 103:a.p=a.c;break;case 104:a.n=a.e;break;case 105:a.n=a.d;break;case 106:a.n=a.h;break;case 107:a.n=a.g;break;case 108:a.n=a.p;break;case 109:break;case 110:a.f=q(a,E(a)+p(a));a.b++;break;case 111:a.n=a.c;break;case 112:o(a,E(a)+p(a),a.e);a.b++;break;case 113:o(a,E(a)+p(a),a.d);a.b++;break;case 114:o(a,E(a)+p(a),a.h);a.b++;break;case 115:o(a,E(a)+p(a),a.g);a.b++;
break;case 116:o(a,E(a)+p(a),a.i);a.b++;break;case 117:o(a,E(a)+p(a),a.f);a.b++;break;case 119:o(a,E(a)+p(a),a.c);a.b++;break;case 124:a.c=a.p;break;case 125:a.c=a.n;break;case 126:a.c=q(a,E(a)+p(a));a.b++;break;case 132:l(a,a.p);break;case 133:l(a,a.n);break;case 134:l(a,q(a,E(a)+p(a)));a.b++;break;case 140:L(a,a.p);break;case 141:L(a,a.n);break;case 142:L(a,q(a,E(a)+p(a)));a.b++;break;case 148:i(a,a.p);break;case 149:i(a,a.n);break;case 150:i(a,q(a,E(a)+p(a)));a.b++;break;case 156:K(a,a.p);break;
case 157:K(a,a.n);break;case 158:K(a,q(a,E(a)+p(a)));a.b++;break;case 164:a.a=a.j[a.c&=a.p]|16;break;case 165:a.a=a.j[a.c&=a.n]|16;break;case 166:a.a=a.j[a.c&=q(a,E(a)+p(a))]|16;a.b++;break;case 172:a.a=a.j[a.c^=a.p];break;case 173:a.a=a.j[a.c^=a.n];break;case 174:a.a=a.j[a.c^=q(a,E(a)+p(a))];a.b++;break;case 180:a.a=a.j[a.c|=a.p];break;case 181:a.a=a.j[a.c|=a.n];break;case 182:a.a=a.j[a.c|=q(a,E(a)+p(a))];a.b++;break;case 188:J(a,a.p);break;case 189:J(a,a.n);break;case 190:J(a,q(a,E(a)+p(a)));a.b++;
break;case 203:Fa(a,E(a));break;case 225:Da(a,n(a,a.k));a.k+=2;break;case 227:c=E(a);Da(a,n(a,a.k));o(a,a.k,c&255);o(a,a.k+1,c>>8);break;case 229:a.push(a.p,a.n);break;case 233:a.b=E(a);break;case 249:a.k=E(a);break;default:a.b--}break;case 222:K(b,q(b,b.b++));break;case 223:b.push(b.b);b.b=24;break;case 224:V(b,0==(b.a&4));break;case 225:Ea(b,n(b,b.k));b.k+=2;break;case 226:W(b,0==(b.a&4));break;case 227:a=b.i;b.i=q(b,b.k+1);o(b,b.k+1,a);a=b.f;b.f=q(b,b.k);o(b,b.k,a);break;case 228:b.call(0==(b.a&
4));break;case 229:b.push(b.i,b.f);break;case 230:b.a=b.j[b.c&=q(b,b.b++)]|16;break;case 231:b.push(b.b);b.b=32;break;case 232:V(b,0!=(b.a&4));break;case 233:b.b=G(b);break;case 234:W(b,0!=(b.a&4));break;case 235:a=b.h;b.h=b.i;b.i=a;a=b.g;b.g=b.f;b.f=a;break;case 236:b.call(0!=(b.a&4));break;case 237:var a=b,c=q(b,b.b),f=void 0;a.l-=va[c];switch(c){case 64:a.e=Y(a.port,a.d);a.a=a.a&1|a.j[a.e];a.b++;break;case 65:X(a.port,a.d,a.e);a.b++;break;case 66:xa(a,I(a));a.b++;break;case 67:c=n(a,a.b+1);o(a,
c++,a.d);o(a,c,a.e);a.b+=3;break;case 68:case 76:case 84:case 92:case 100:case 108:case 116:case 124:c=a.c;a.c=0;i(a,c);a.b++;break;case 69:case 77:case 85:case 93:case 101:case 109:case 117:case 125:a.b=n(a,a.k);a.k+=2;a.O=a.P;break;case 70:case 78:case 102:case 110:a.sa=0;a.b++;break;case 71:a.Ha=a.c;a.b++;break;case 72:a.d=Y(a.port,a.d);a.a=a.a&1|a.j[a.d];a.b++;break;case 73:X(a.port,a.d,a.d);a.b++;break;case 74:ya(a,I(a));a.b++;break;case 75:c=n(a,a.b+1);a.d=q(a,c++);a.e=q(a,c);a.b+=3;break;case 79:a.ub=
a.c;a.b++;break;case 80:a.h=Y(a.port,a.d);a.a=a.a&1|a.j[a.h];a.b++;break;case 81:X(a.port,a.d,a.h);a.b++;break;case 82:xa(a,H(a));a.b++;break;case 83:c=n(a,a.b+1);o(a,c++,a.g);o(a,c,a.h);a.b+=3;break;case 86:case 118:a.sa=1;a.b++;break;case 87:a.c=a.Ha;a.a=a.a&1|a.za[a.c]|(a.P?4:0);a.b++;break;case 88:a.g=Y(a.port,a.d);a.a=a.a&1|a.j[a.g];a.b++;break;case 89:X(a.port,a.d,a.g);a.b++;break;case 90:ya(a,H(a));a.b++;break;case 91:c=n(a,a.b+1);a.g=q(a,c++);a.h=q(a,c);a.b+=3;break;case 95:a.c=Math.round(255*
Math.random());a.a=a.a&1|a.za[a.c]|(a.P?4:0);a.b++;break;case 96:a.i=Y(a.port,a.d);a.a=a.a&1|a.j[a.i];a.b++;break;case 97:X(a.port,a.d,a.i);a.b++;break;case 98:xa(a,G(a));a.b++;break;case 99:c=n(a,a.b+1);o(a,c++,a.f);o(a,c,a.i);a.b+=3;break;case 103:c=G(a);f=q(a,c);o(a,c,f>>4|(a.c&15)<<4);a.c=a.c&240|f&15;a.a=a.a&1|a.j[a.c];a.b++;break;case 104:a.f=Y(a.port,a.d);a.a=a.a&1|a.j[a.f];a.b++;break;case 105:X(a.port,a.d,a.f);a.b++;break;case 106:ya(a,G(a));a.b++;break;case 107:c=n(a,a.b+1);a.f=q(a,c++);
a.i=q(a,c);a.b+=3;break;case 111:c=G(a);f=q(a,c);o(a,c,(f&15)<<4|a.c&15);a.c=a.c&240|f>>4;a.a=a.a&1|a.j[a.c];a.b++;break;case 113:X(a.port,a.d,0);a.b++;break;case 114:xa(a,a.k);a.b++;break;case 115:c=n(a,a.b+1);o(a,c++,a.k&255);o(a,c,a.k>>8);a.b+=3;break;case 120:a.c=Y(a.port,a.d);a.a=a.a&1|a.j[a.c];a.b++;break;case 121:X(a.port,a.d,a.c);a.b++;break;case 122:ya(a,a.k);a.b++;break;case 123:a.k=n(a,n(a,a.b+1));a.b+=3;break;case 160:o(a,H(a),q(a,G(a)));Ba(a);C(a);B(a);a.a=a.a&193|(0!=I(a)?4:0);a.b++;
break;case 161:f=a.a&1|2;J(a,q(a,G(a)));C(a);B(a);f|=0==I(a)?0:4;a.a=a.a&248|f;a.b++;break;case 162:f=Y(a.port,a.d);o(a,G(a),f);a.e=v(a,a.e);C(a);a.a=128==(f&128)?a.a|2:a.a&-3;a.b++;break;case 163:f=q(a,G(a));X(a.port,a.d,f);C(a);a.e=v(a,a.e);255<a.f+f?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=128==(f&128)?a.a|2:a.a&-3;a.b++;break;case 168:o(a,H(a),q(a,G(a)));Aa(a);z(a);B(a);a.a=a.a&193|(0!=I(a)?4:0);a.b++;break;case 169:f=a.a&1|2;J(a,q(a,G(a)));z(a);B(a);f|=0==I(a)?0:4;a.a=a.a&248|f;a.b++;break;case 170:f=
Y(a.port,a.d);o(a,G(a),f);a.e=v(a,a.e);z(a);a.a=0!=(f&128)?a.a|2:a.a&-3;a.b++;break;case 171:f=q(a,G(a));X(a.port,a.d,f);z(a);a.e=v(a,a.e);255<a.f+f?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=128==(f&128)?a.a|2:a.a&-3;a.b++;break;case 176:o(a,H(a),q(a,G(a)));Ba(a);C(a);B(a);0!=I(a)?(a.a|=4,a.l-=5,a.b--):(a.a&=-5,a.b++);a.a&=-3;a.a&=-17;break;case 177:f=a.a&1|2;J(a,q(a,G(a)));C(a);B(a);f|=0==I(a)?0:4;0!=(f&4)&&0==(a.a&64)?(a.l-=5,a.b--):a.b++;a.a=a.a&248|f;break;case 178:f=Y(a.port,a.d);o(a,G(a),f);a.e=
v(a,a.e);C(a);0!=a.e?(a.l-=5,a.b--):a.b++;a.a=128==(f&128)?a.a|2:a.a&-3;break;case 179:f=q(a,G(a));X(a.port,a.d,f);a.e=v(a,a.e);C(a);0!=a.e?(a.l-=5,a.b--):a.b++;255<a.f+f?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=0!=(f&128)?a.a|2:a.a&-3;break;case 184:o(a,H(a),q(a,G(a)));Aa(a);z(a);B(a);0!=I(a)?(a.a|=4,a.l-=5,a.b--):(a.a&=-5,a.b++);a.a&=-3;a.a&=-17;break;case 185:f=a.a&1|2;J(a,q(a,G(a)));z(a);B(a);f|=0==I(a)?0:4;0!=(f&4)&&0==(a.a&64)?(a.l-=5,a.b--):a.b++;a.a=a.a&248|f;break;case 186:f=Y(a.port,a.d);
o(a,G(a),f);a.e=v(a,a.e);z(a);0!=a.e?(a.l-=5,a.b--):a.b++;a.a=0!=(f&128)?a.a|2:a.a&-3;break;case 187:f=q(a,G(a));X(a.port,a.d,f);a.e=v(a,a.e);z(a);0!=a.e?(a.l-=5,a.b--):a.b++;255<a.f+f?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=0!=(f&128)?a.a|2:a.a&-3;break;default:a.b++}break;case 238:b.a=b.j[b.c^=q(b,b.b++)];break;case 239:b.push(b.b);b.b=40;break;case 240:V(b,0==(b.a&128));break;case 241:b.a=q(b,b.k++);b.c=q(b,b.k++);break;case 242:W(b,0==(b.a&128));break;case 243:b.O=b.P=h;b.na=e;break;case 244:b.call(0==
(b.a&128));break;case 245:b.push(b.c,b.a);break;case 246:b.a=b.j[b.c|=q(b,b.b++)];break;case 247:b.push(b.b);b.b=48;break;case 248:V(b,0!=(b.a&128));break;case 249:b.k=G(b);break;case 250:W(b,0!=(b.a&128));break;case 251:b.O=b.P=b.na=e;break;case 252:b.call(0!=(b.a&128));break;case 253:a=b;c=q(b,b.b++);a.l-=ta[c];switch(c){case 9:Ca(a,r(a,D(a),I(a)));break;case 25:Ca(a,r(a,D(a),H(a)));break;case 33:Ca(a,n(a,a.b));a.b+=2;break;case 34:c=n(a,a.b);o(a,c++,a.o);o(a,c,a.q);a.b+=2;break;case 35:a.o=a.o+
1&255;0==a.o&&(a.q=a.q+1&255);break;case 36:a.q=w(a,a.q);break;case 37:a.q=v(a,a.q);break;case 38:a.q=q(a,a.b++);break;case 41:Ca(a,r(a,D(a),D(a)));break;case 42:c=n(a,a.b);a.o=q(a,c);a.q=q(a,++c);a.b+=2;break;case 43:a.o=a.o-1&255;255==a.o&&(a.q=a.q-1&255);break;case 44:a.o=w(a,a.o);break;case 45:a.o=v(a,a.o);break;case 46:a.o=q(a,a.b++);break;case 52:Ha(a,D(a)+p(a));a.b++;break;case 53:Ga(a,D(a)+p(a));a.b++;break;case 54:o(a,D(a)+p(a),q(a,++a.b));a.b++;break;case 57:Ca(a,r(a,D(a),a.k));break;case 68:a.e=
a.q;break;case 69:a.e=a.o;break;case 70:a.e=q(a,D(a)+p(a));a.b++;break;case 76:a.d=a.q;break;case 77:a.d=a.o;break;case 78:a.d=q(a,D(a)+p(a));a.b++;break;case 84:a.h=a.q;break;case 85:a.h=a.o;break;case 86:a.h=q(a,D(a)+p(a));a.b++;break;case 92:a.g=a.q;break;case 93:a.g=a.o;break;case 94:a.g=q(a,D(a)+p(a));a.b++;break;case 96:a.q=a.e;break;case 97:a.q=a.d;break;case 98:a.q=a.h;break;case 99:a.q=a.g;break;case 100:break;case 101:a.q=a.o;break;case 102:a.i=q(a,D(a)+p(a));a.b++;break;case 103:a.q=a.c;
break;case 104:a.o=a.e;break;case 105:a.o=a.d;break;case 106:a.o=a.h;break;case 107:a.o=a.g;break;case 108:a.o=a.q;break;case 109:break;case 110:a.f=q(a,D(a)+p(a));a.b++;break;case 111:a.o=a.c;break;case 112:o(a,D(a)+p(a),a.e);a.b++;break;case 113:o(a,D(a)+p(a),a.d);a.b++;break;case 114:o(a,D(a)+p(a),a.h);a.b++;break;case 115:o(a,D(a)+p(a),a.g);a.b++;break;case 116:o(a,D(a)+p(a),a.i);a.b++;break;case 117:o(a,D(a)+p(a),a.f);a.b++;break;case 119:o(a,D(a)+p(a),a.c);a.b++;break;case 124:a.c=a.q;break;
case 125:a.c=a.o;break;case 126:a.c=q(a,D(a)+p(a));a.b++;break;case 132:l(a,a.q);break;case 133:l(a,a.o);break;case 134:l(a,q(a,D(a)+p(a)));a.b++;break;case 140:L(a,a.q);break;case 141:L(a,a.o);break;case 142:L(a,q(a,D(a)+p(a)));a.b++;break;case 148:i(a,a.q);break;case 149:i(a,a.o);break;case 150:i(a,q(a,D(a)+p(a)));a.b++;break;case 156:K(a,a.q);break;case 157:K(a,a.o);break;case 158:K(a,q(a,D(a)+p(a)));a.b++;break;case 164:a.a=a.j[a.c&=a.q]|16;break;case 165:a.a=a.j[a.c&=a.o]|16;break;case 166:a.a=
a.j[a.c&=q(a,D(a)+p(a))]|16;a.b++;break;case 172:a.a=a.j[a.c^=a.q];break;case 173:a.a=a.j[a.c^=a.o];break;case 174:a.a=a.j[a.c^=q(a,D(a)+p(a))];a.b++;break;case 180:a.a=a.j[a.c|=a.q];break;case 181:a.a=a.j[a.c|=a.o];break;case 182:a.a=a.j[a.c|=q(a,D(a)+p(a))];a.b++;break;case 188:J(a,a.q);break;case 189:J(a,a.o);break;case 190:J(a,q(a,D(a)+p(a)));a.b++;break;case 203:Fa(a,D(a));break;case 225:Ca(a,n(a,a.k));a.k+=2;break;case 227:c=D(a);Ca(a,n(a,a.k));o(a,a.k,c&255);o(a,a.k+1,c>>8);break;case 229:a.push(a.q,
a.o);break;case 233:a.b=D(a);break;case 249:a.k=D(a);break;default:a.b--}break;case 254:J(b,q(b,b.b++));break;case 255:b.push(b.b),b.b=56}}};function da(b){this.m=b;this.Lb=this.Kb=this.fa=this.r=this.s=0;this.Jb=this.Ib=h}
da.prototype={reset:function(){this.fa=this.r=this.s=255;this.Ka=h},keydown:function(b){switch(b.keyCode){case 38:this.s&=-2;break;case 40:this.s&=-3;break;case 37:this.s&=-5;break;case 39:this.s&=-9;break;case 88:this.s&=-17;break;case 90:this.s&=-33;break;case 13:this.m.aa?this.m.Ka=e:this.fa&=-129;break;case 104:this.r&=-2;break;case 98:this.r&=-3;break;case 100:this.r&=-5;break;case 102:this.r&=-9;break;case 103:this.r&=-17;break;case 105:this.r&=-33;break;case 97:this.r&=-65;break;default:return}b.preventDefault()},
keyup:function(b){switch(b.keyCode){case 38:this.s|=1;break;case 40:this.s|=2;break;case 37:this.s|=4;break;case 39:this.s|=8;break;case 88:this.s|=16;break;case 90:this.s|=32;break;case 13:this.m.aa||(this.fa|=128);break;case 104:this.r|=1;break;case 98:this.r|=2;break;case 100:this.r|=4;break;case 102:this.r|=8;break;case 103:this.r|=16;break;case 105:this.r|=32;break;case 97:this.r|=64;break;default:return}b.preventDefault()}};var ka=Number.MIN_VALUE,Ja=[25,20,16,13,10,8,6,5,4,3,3,2,2,1,1,0];function ha(b){this.m=b;this.M=this.nb=0;this.B=Array(8);this.G=0;this.z=Array(4);this.J=Array(4);this.ea=Array(3);this.ka=16;this.U=32768;this.la=Array(4)}
ha.prototype={write:function(b){0!=(b&128)?(this.G=b>>4&7,this.B[this.G]=this.B[this.G]&1008|b&15):this.B[this.G]=0==this.G||2==this.G||4==this.G?this.B[this.G]&15|(b&63)<<4:b&15;switch(this.G){case 0:case 2:case 4:0==this.B[this.G]&&(this.B[this.G]=1);break;case 6:this.ka=16<<(this.B[6]&3),this.U=32768}},update:function(b,a){var d=[],c,f;for(c=0;c<a;c++){for(f=0;3>f;f++)this.la[f]=this.ea[f]!=ka?Ja[this.B[(f<<1)+1]]*this.ea[f]>>8:Ja[this.B[(f<<1)+1]]*this.J[f];this.la[3]=Ja[this.B[7]]*(this.U&1)<<
1;f=this.la[0]+this.la[1]+this.la[2]+this.la[3];127<f?f=127:-128>f&&(f=-128);d[b+c]=f;this.M+=this.nb;var j=this.M>>8,k=j<<8;this.M-=k;this.z[0]-=j;this.z[1]-=j;this.z[2]-=j;this.z[3]=128==this.ka?this.z[2]:this.z[3]-j;for(f=0;3>f;f++){var m=this.z[f];if(0>=m){var t=this.B[f<<1];6<t?(this.ea[f]=(k-this.M+512*m<<8)*this.J[f]/(k+this.M),this.J[f]=-this.J[f]):(this.J[f]=1,this.ea[f]=ka);this.z[f]+=t*(j/t+1)}else this.ea[f]=ka}0>=this.z[3]&&(this.J[3]=-this.J[3],128!=this.ka&&(this.z[3]+=this.ka*(j/this.ka+
1)),1==this.J[3]&&(this.U=this.U>>1|(0!=(this.B[6]&4)?0!=(this.U&9)&&0!=(this.U&9^9)?1:0:this.U&1)<<15))}return d}};function ga(b){this.m=b;this.lb=0;this.A=Array(16384);this.H=Array(32);for(b=0;32>b;b++)this.H[b]=0;this.t=Array(16);this.status=0;this.Z=h;this.ra=this.ha=this.La=this.va=this.location=this.N=0;this.pa=Array(256);this.W=Array(256);this.kb=this.Va=0;this.display=Array(49152);this.Ja=[];this.ya=[];this.Sa=[];this.I=this.bb=this.Ga=0;this.R=h;this.ia=Array(192);for(b=0;192>b;b++)this.ia[b]=Array(25);this.Pa=Array(512);this.ua=Array(512);for(b=this.ba=this.ja=0;512>b;b++)this.Pa[b]=Array(64)}
ga.prototype={reset:function(){var b,a,d,c;if(this.m.aa&&!this.Ja.length){this.Ja=Array(64);for(b=0;64>b;b++)a=b&3,d=b>>2&3,c=b>>4&3,this.Ja[b]=85*a|85*d<<8|85*c<<16}else if(this.m.S&&!this.ya.length){this.ya=Array(256);this.Sa=Array(16);for(b=0;256>b;b++)d=b&15,c=b>>4&15,this.ya[b]=c<<12|c<<8|d<<4|d;for(b=0;16>b;b++)this.Sa[b]=b<<20}this.Z=e;for(b=this.va=this.status=this.ra=this.location=0;16>b;b++)this.t[b]=0;this.t[2]=14;this.t[5]=126;this.kb=0;this.m.C.Q=h;this.R=e;this.ja=512;this.ba=-1;for(b=
0;16384>b;b++)this.A[b]=0;for(b=0;49152>b;b++)this.display[b]=0}};function Ka(b){b.Va=(b.t[2]&14)<<10;b.ja=0;b.ba=511;for(var a=0,d=b.ua.length;a<d;a++)b.ua[a]=e;b.I=(b.t[5]&-130)<<7;b.R=e};function ca(b){this.m=b;this.enable=aa();this.updateStatus=aa();this.Gb=aa();this.yb=aa()}
"undefined"!==typeof $&&($.fn.zb=function(b){function a(a){this.m=a;var f=this,a=$("<div></div>"),j=$('<div class="roms"></div>'),k=$('<div class="controls"></div>'),m=qa(["fullscreenEnabled","mozFullScreenEnabled","webkitCancelFullScreen"]);this.sb=qa(["hidden","mozHidden","webkitHidden","msHidden"]);this.screen=$('<canvas width=256 height=192 class="screen"></canvas>');this.qa=this.screen[0].getContext("2d");this.qa.getImageData?(this.Ca=this.qa.getImageData(0,0,256,192),this.Eb(),this.ma=$("<select></select>").appendTo(j),
this.ma.change(function(){f.fb();f.F.start.removeAttr("disabled")}),this.F={start:$('<input type="button" value="Stop" class="btn" disabled="disabled">').appendTo(k),vb:$('<input type="button" value="Restart" class="btn" disabled="disabled">').appendTo(k),jb:$('<input type="button" value="Enable sound" class="btn" disabled="disabled">').appendTo(k),zoom:$('<input type="button" value="Zoom in" class="btn">').appendTo(k)},m&&$('<input type="button" value="Go fullscreen" class="btn">').appendTo(k).click(function(){var a=
f.screen[0];a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}),this.log=$('<div id="status"></div>'),this.F.start.click(function(){f.m.Ia?(f.m.stop(),f.updateStatus("Paused"),f.F.start.attr("value","Start")):(f.m.start(),f.F.start.attr("value","Stop"))}),this.F.vb.click(function(){""!==f.m.hb&&""!==f.m.ib&&oa(f.m,f.m.hb,f.m.ib)?(f.m.reset(),Ka(f.m.w),f.m.start()):$(this).attr("disabled","disabled")}),
this.F.jb.click(aa()),this.mb=h,this.F.zoom.click(function(){f.mb?(f.screen.animate({width:"256px",height:"192px"},function(){$(this).removeAttr("style")}),f.F.zoom.attr("value","Zoom in")):(f.screen.animate({width:"512px",height:"384px"}),f.F.zoom.attr("value","Zoom out"));f.mb=!f.mb}),this.screen.appendTo(a),j.appendTo(a),k.appendTo(a),this.log.appendTo(a),a.appendTo($(d)),"undefined"!=typeof b&&this.Fb(b),$(document).bind("keydown",function(a){f.m.T.keydown(a)}).bind("keyup",function(a){f.m.T.keyup(a)})):
$(d).html('<div class="alert-message error"><p><strong>Oh no!</strong> Your browser doesn\'t support writing pixels directly to the <code>&lt;canvas&gt;</code> tag. Try the latest versions of Firefox, Google Chrome, Opera or Safari!</p></div>')}var d=this;a.prototype={reset:function(){this.screen[0].width=256;this.screen[0].height=192;this.log.text("")},Eb:function(){this.qa.fillStyle="black";this.qa.fillRect(0,0,256,192);for(var a=3;a<=this.Ca.data.length-3;a+=4)this.Ca.data[a]=255},Fb:function(a){this.ma.children().remove();
$("<option>Select a ROM...</option>").appendTo(this.ma);for(var b in a)if(a.hasOwnProperty(b)){for(var d=$("<optgroup></optgroup>").attr("label",b),k=a[b].length,m=0;m<k;m++)$("<option>"+a[b][m][0]+"</option>").attr("value",a[b][m][1]).appendTo(d);this.ma.append(d)}},fb:function(){var a=this;this.updateStatus("Downloading...");$.ajax({url:escape(this.ma.val()),xhr:function(){var b=$.ajaxSettings.xhr();"undefined"!==typeof b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined");
return a.xhr=b},complete:function(b){oa(a.m,b.responseText,a.ma.val());a.m.reset();Ka(a.m.w);a.m.start();a.enable()}})},enable:function(){this.F.vb.removeAttr("disabled");this.m.Na?this.F.jb.attr("value","Disable sound"):this.F.jb.attr("value","Enable sound")},updateStatus:function(a){this.log.text(a)},Gb:aa(),yb:function(a){if(!this.sb||!document[this.sb]){var b=this.Ca.data,d,k,m;for(k=0;49152>=k;k++)d=a[k],m=4*k,b[m]=d&255,b[m+1]=d>>8&255,b[m+2]=d>>16&255;this.qa.putImageData(this.Ca,0,0)}}};return a});function ia(b){this.m=b;this.w=b.w;this.wa=b.wa;this.T=b.T;this.qb=64;this.Db=0;this.K=[]}ia.prototype={reset:function(){this.K=Array(2)}};
function Y(b,a){if(b.m.S&&7>a)switch(a){case 0:return b.T.fa&191|b.qb;case 1:case 2:case 3:case 4:case 5:return 0;case 6:return 255}switch(a&193){case 64:var d;a:{d=b.w;if(0==d.lb){if(218<d.ha){d=d.ha-6;break a}}else if(242<d.ha){d=d.ha-57;break a}d=d.ha}return d;case 65:return b.Db;case 128:d=b.w;d.Z=e;var c=d.La;d.La=d.A[d.location++&16383]&255;return c;case 129:return d=b.w,d.Z=e,c=d.status,d.status=0,d.m.C.Q=h,c;case 192:return b.T.s;case 193:return b.T.r&63|b.K[0]|b.K[1]}return 255}
function X(b,a,d){if(!(b.m.S&&7>a))switch(a&193){case 1:b.K[0]=(d&32)<<1;b.K[1]=d&128;0==b.qb&&(b.K[0]=~b.K[0],b.K[1]=~b.K[1]);break;case 128:b=b.w;b.Z=e;switch(b.va){case 0:case 1:case 2:a=b.location&16383;if(d!=(b.A[a]&255)){if(a>=b.I&&a<b.I+64)b.R=e;else if(a>=b.I+128&&a<b.I+256)b.R=e;else{var c=a>>5;b.ua[c]=e;c<b.ja&&(b.ja=c);c>b.ba&&(b.ba=c)}b.A[a]=d}break;case 3:b.m.aa?b.H[b.location&31]=b.Ja[d&63]:b.m.S&&(b.H[(b.location&63)>>1]=0==(b.location&1)?b.ya[d]:b.H[(b.location&63)>>1]|b.Sa[d&15])}b.La=
d;b.location++;break;case 129:b=b.w;if(b.Z)b.Z=h,b.N=d,b.location=b.location&16128|d;else if(b.Z=e,b.va=d>>6&3,b.location=b.N|d<<8,0==b.va)b.La=b.A[b.location++&16383]&255;else if(2==b.va){d&=15;switch(d){case 0:0!=(b.status&4)&&(b.m.C.Q=0!=(b.N&16));break;case 1:0!=(b.status&128)&&0!=(b.N&32)&&(b.m.C.Q=e);(b.N&3)!=(b.t[d]&3)&&(b.R=e);break;case 2:b.Va=(b.N&14)<<10;break;case 5:a=b.I,b.I=(b.N&-130)<<7,a!=b.I&&(b.R=e)}b.t[d]=b.N}break;case 64:case 65:b.m.Na&&b.wa.write(d)}};window.JSSMS=ba;jQuery.fn.JSSMSUI=jQuery.fn.zb;
