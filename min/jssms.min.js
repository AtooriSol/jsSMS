/*
 jsSMS - A Sega Master System/GameGear emulator in JavaScript
 Copyright (C) 2012  Guillaume Marty (https://github.com/gmarty)
 Based on JavaGear Copyright (c) 2002-2008 Chris White.

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
'use strict';var f=void 0,g=!0,h=null,j=!1;function ba(){return function(){}};function ca(b){this.tb={ui:da,swfPath:"lib/"};if("undefined"!=typeof b)for(var a in this.tb)"undefined"!=typeof b[a]&&(this.tb[a]=b[a]);this.T=new ea(this);this.Qa=new b.ui(this);this.w=new ha(this);this.wa=new ia(this);this.ports=new ja(this);this.C=new ka(this);this.Qa.updateStatus("Ready to load a ROM.")}
ca.prototype={Ia:j,Xa:0,L:0,rb:0,Da:0,Fa:0,Ka:j,aa:g,S:j,Na:g,Aa:[],Ba:0,Ma:0,xa:[],pb:0,ob:0,Ea:0,Bb:0,hb:"",ib:"",reset:function(){var b=this.w.lb,a=0;0==b||this.S?(this.Da=60,this.L=262,a=3579545):1==b&&(this.Da=50,this.L=313,a=3546893);this.Xa=Math.round(a/this.Da/this.L+1);this.w.lb=b;if(this.Na){b=this.wa;b.nb=(a<<8)/16/44100;b.M=0;b.G=0;b.ka=16;b.U=32768;for(a=0;4>a;a++)b.B[a<<1]=1,b.B[(a<<1)+1]=15,b.z[a]=0,b.J[a]=1,3!=a&&(b.ea[a]=la);this.Ma=Math.round(44100/this.Da);if(0==this.Aa.length||
this.Aa.length!=this.Ma)this.Aa=Array(this.Ma);if(0==this.xa.length||this.xa.length!=this.L){this.xa=Array(this.L);for(var c=0,a=0;a<this.L;a++)b=(this.Ma<<16)/this.L+c,c=b-(b>>16<<16),this.xa[a]=b>>16}}this.Bb=0;this.Fa=this.rb;this.T.reset();this.Qa.reset();this.w.reset();this.ports.reset();this.C.reset();ma(this.C,h)},start:function(){var b=this;this.Ia||(this.Ia=g);this.Cb=setInterval(function(){b.frame()},17);this.eb=h;this.Ea=0;na(this);this.Ab=setInterval(function(){na(b)},500)},stop:function(){clearInterval(this.Cb);
clearInterval(this.Ab);this.Ia=j},frame:function(){var b;for(b=0;b<this.L;b++){if(193==b){oa(this.C,this.Xa,8);var a=this.w;a.status|=128;oa(this.C,0,0)}else oa(this.C,this.Xa,0);this.Na&&(a=b,0==a&&(this.Ba=0),a=this.xa[a],this.Aa=this.wa.update(this.Ba,a),this.Ba+=a);this.w.ha=b;if(0==this.Fa&&192>b){var c=this.w,a=b;if(!c.m.S||!(24>a||168<=a)){for(var d=c.W.length;0!=d--;)c.W[d]=j;if(0!=(c.t[1]&64)){if(-1!=c.ba){for(var d=c,e=d.ja;e<=d.ba;e++)if(d.ua[e]){d.ua[e]=j;for(var k=d.Pa[e],i=0,m=e<<5,
t=0;8>t;t++)for(var x=d.A[m++],s=d.A[m++],F=d.A[m++],y=d.A[m++],A=128;0!=A;A>>=1){var u=0;0!=(x&A)&&(u|=1);0!=(s&A)&&(u|=2);0!=(F&A)&&(u|=4);0!=(y&A)&&(u|=8);k[i++]=u}}d.ja=512;d.ba=-1}d=c;e=a;k=d.t[8];x=d.kb;16>e&&0!=(d.t[0]&64)&&(k=0);i=d.t[0]&128;m=32-(k>>3)+d.Ga;t=e+x>>3;27<t&&(t-=28);x=(e+(x&7)&7)<<3;s=e<<8;for(F=d.Ga;F<d.bb;F++){var fa=d.Va+((m&31)<<1)+(t<<6),y=d.A[fa+1],A=(y&8)<<1,u=(F<<3)+(k&7),Aa=0==(y&4)?x:56-x,fa=d.Pa[(d.A[fa]&255)+((y&1)<<8)];if(0==(y&2))for(var aa=0;8>aa&&256>u;aa++,
u++){var ga=fa[aa+Aa];d.pa[u]=0!=(y&16)&&0!=ga;d.display[u+s]=d.H[ga+A]}else for(aa=7;0<=aa&&256>u;aa--,u++)ga=fa[aa+Aa],d.pa[u]=0!=(y&16)&&0!=ga,d.display[u+s]=d.H[ga+A];m++;0!=i&&23==F&&(t=e>>3,x=(e&7)<<3)}if(c.R){d=c;d.R=j;for(e=0;e<d.ia.length;e++)d.ia[e][0]=0;e=0==(d.t[1]&2)?8:16;1==(d.t[1]&1)&&(e<<=1);for(k=0;64>k;k++){i=d.A[d.I+k]&255;if(208==i)break;i++;240<i&&(i-=256);for(m=0;192>m;m++)m>=i&&m-i<e&&(t=d.ia[m],8>t[0]&&(x=3*t[0]+1,s=d.I+(k<<1)+128,t[x++]=d.A[s++]&255,t[x++]=i,t[x++]=d.A[s]&
255,t[0]++))}}if(0!=c.ia[a][0]){d=c;e=a;k=d.ia[e];x=Math.min(8,k[0]);i=d.t[1]&1;m=e<<8;for(t=3*x;0!=x--;)if(F=k[t--]|(d.t[6]&4)<<6,y=k[t--],s=k[t--]-(d.t[0]&8),A=e-y>>i,0!=(d.t[1]&2)&&(F&=-2),F=d.Pa[F+((A&8)>>3)],y=0,0>s&&(y=-s,s=0),A=y+((A&7)<<3),0==i)for(;8>y&&256>s;y++,s++)u=F[A++],0!=u&&!d.pa[s]&&(d.display[s+m]=d.H[u+16],d.W[s]?d.status|=32:d.W[s]=g);else for(;8>y&&256>s;y++,s+=2)if(u=F[A++],0!=u&&!d.pa[s]&&(d.display[s+m]=d.H[u+16],d.W[s]?d.status|=32:d.W[s]=g),0!=u&&!d.pa[s+1])d.display[s+
m+1]=d.H[u+16],d.W[s+1]?d.status|=32:d.W[s+1]=g;8<=k[0]&&(d.status|=64)}if(c.m.aa&&0!=(c.t[0]&32)){d=c.H[16+(c.t[7]&15)];a<<=8;if(32<16+(c.t[7]&15))debugger;if(49152<a)debugger;c.display[a++]=d;c.display[a++]=d;c.display[a++]=d;c.display[a++]=d;c.display[a++]=d;c.display[a++]=d;c.display[a++]=d;c.display[a]=d}}else{d=c.H[16+(c.t[7]&15)];a<<=8;e=f;for(e=0;256>e;e++)c.display[a++]=d}}}a=this.w;c=b;if(192>=c){if(0==a.ra?(a.ra=a.t[10],a.status|=4):a.ra--,0!=(a.status&4)&&0!=(a.t[0]&16))a.m.C.Q=g}else if(a.ra=
a.t[10],0!=(a.status&128)&&(0!=(a.t[1]&32)&&224>c)&&(a.m.C.Q=g),c==a.m.L-1)a.kb=a.t[9]}this.Ka&&(b=this.C,b.P=b.O,b.O=j,b.ga&&(b.b++,b.ga=j),b.push(b.b),b.b=102,b.l-=11,this.Ka=j);0==this.Fa--?(this.Fa=this.rb,b=g):b=j;b&&this.Qa.yb(this.w.display,[]);this.Ea++},fb:function(b,a){0!=a%1024&&(b=b.substr(512),a-=512);var c,d,e=Math.round(a/1024),k=Array(e);for(c=0;c<e;c++){k[c]=Array(1024);for(d=0;1024>d;d++)k[c][d]=b.charCodeAt(1024*c+d)&255}return k}};
function pa(b,a,c){var d;d=".gg"===c.substr(-3).toLowerCase()?2:1;var e=a.length;1==d?(b.aa=g,b.S=j,b.w.Ga=0,b.w.bb=32,b.pb=256,b.ob=192):2==d&&(b.S=g,b.aa=j,b.w.Ga=5,b.w.bb=27,b.pb=160,b.ob=144);if(1024>=e)return j;d=b.fb(a,e);if(d==h)return j;ma(b.C,d);b.hb=a;b.ib=c;return g}function na(b){var a=+new Date,c="Running";b.eb&&(c+=": "+(b.Ea/((a-b.eb)/1E3)).toFixed(2)+" (/ "+(1E3/17).toFixed(2)+") FPS");b.Qa.updateStatus(c);b.Ea=0;b.eb=a};function qa(b){if(b===f)return[];for(var a=b.length,c=Array(a);a--;)"undefined"!=typeof b[a]&&(c[a]=b[a]);return c}function ra(b){var a=j;b.some(function(b){return b in document?(a=b,g):j});return a};var sa=[4,10,7,6,4,4,7,4,4,11,7,6,4,4,7,4,8,10,7,6,4,4,7,4,12,11,7,6,4,4,7,4,7,10,16,6,4,4,7,4,7,11,16,6,4,4,7,4,7,10,13,6,11,11,10,4,7,11,13,6,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,7,7,7,7,7,7,4,7,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,5,10,10,10,10,11,7,11,5,10,10,0,10,17,7,11,5,10,10,11,10,11,7,11,5,4,10,11,10,0,7,11,5,10,10,
19,10,11,7,11,5,4,10,4,10,0,7,11,5,10,10,4,10,11,7,11,5,6,10,4,10,0,7,11],ta=[8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,
8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8],ua=[4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,14,20,10,8,8,11,4,4,15,20,10,8,8,11,4,4,4,4,4,23,23,19,4,4,15,4,4,4,4,4,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,8,8,8,8,8,8,19,8,8,8,8,8,8,8,19,8,19,19,19,19,19,19,4,19,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,
4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,14,4,23,4,15,4,4,4,8,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,10,4,4,4,4,4,4],va=[0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,
0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0],wa=[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,18,8,12,15,20,8,14,8,
8,12,12,15,20,8,14,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];
function ka(b){this.m=b;this.port=b.ports;this.sa=this.k=this.b=0;this.Q=this.na=this.ga=this.P=this.O=j;this.l=this.wb=this.$a=this.a=this.Ha=this.ub=this.q=this.o=this.p=this.n=this.cb=this.ab=this.f=this.i=this.Za=this.Ya=this.g=this.h=this.Wa=this.Ua=this.d=this.e=this.Ta=this.c=this.ta=0;this.V=[];this.gb=Array(8);this.Oa=h;this.xb=j;this.$=Array(4);this.da=0;this.ca=Array(65);this.D=Array(65);this.Hb=Array(1024);this.Ra=[];this.za=[];this.j=[];this.Y=[];this.X=[];this.v=[];this.u=[];this.oa=
[];var a,c,d,e,k,i;this.za=Array(256);this.j=Array(256);this.Y=Array(256);this.X=Array(256);this.oa=Array(256);for(b=0;256>b;b++)a=0!=(b&128)?128:0,c=0==b?64:0,d=b&32,e=b&8,k=xa(b)?4:0,this.za[b]=a|c|d|e,this.j[b]=a|c|d|e|k,this.Y[b]=a|c|d|e,this.Y[b]|=128==b?4:0,this.Y[b]|=0==(b&15)?16:0,this.X[b]=a|c|d|e|2,this.X[b]|=127==b?4:0,this.X[b]|=15==(b&15)?16:0,this.oa[b]=0!=b?b&128:68,this.oa[b]|=d|e|16;this.v=Array(131072);this.u=Array(131072);b=0;a=65536;c=0;d=65536;for(k=0;256>k;k++)for(i=0;256>i;i++)e=
i-k,this.v[b]=0!=i?0!=(i&128)?128:0:64,this.v[b]|=i&40,(i&15)<(k&15)&&(this.v[b]|=16),i<k&&(this.v[b]|=1),0!=((e^k^128)&(e^i)&128)&&(this.v[b]|=4),b++,e=i-k-1,this.v[a]=0!=i?0!=(i&128)?128:0:64,this.v[a]|=i&40,(i&15)<=(k&15)&&(this.v[a]|=16),i<=k&&(this.v[a]|=1),0!=((e^k^128)&(e^i)&128)&&(this.v[a]|=4),a++,e=k-i,this.u[c]=0!=i?0!=(i&128)?130:2:66,this.u[c]|=i&40,(i&15)>(k&15)&&(this.u[c]|=16),i>k&&(this.u[c]|=1),0!=((e^k)&(k^i)&128)&&(this.u[c]|=4),c++,e=k-i-1,this.u[d]=0!=i?0!=(i&128)?130:2:66,this.u[d]|=
i&40,(i&15)>=(k&15)&&(this.u[d]|=16),i>=k&&(this.u[d]|=1),0!=((e^k)&(k^i)&128)&&(this.u[d]|=4),d++;this.Ra=Array(2048);for(b=256;0!=b--;)for(a=0;1>=a;a++)for(c=0;1>=c;c++)for(d=0;1>=d;d++){e=this.Ra;k=a<<8|d<<9|c<<10|b;i=a|d<<1|c<<4;this.c=b;this.a=i;var m=this.c,t=0,x=i&1,s=x;if(0!=(i&16)||9<(m&15))t|=6;if(1==x||159<m||143<m&&9<(m&15))t|=96,s=1;153<m&&(s=1);0!=(i&2)?l(this,t):n(this,t);i=this.a&254|s;i=xa(this.c)?i&251|4:i&251;e[k]=this.c|i<<8}for(b=this.c=this.a=0;65>b;b++)this.D[b]=Array(1024),
this.ca[b]=Array(1024);for(b=0;8>b;b++)this.gb[b]=Array(1024);this.Oa==h&&(this.Oa=Array(32),this.xb=j);this.D[64]=Array(1024);this.ca[64]=Array(1024);this.da=2}
ka.prototype={reset:function(){this.b=this.$a=this.a=this.Ha=this.ub=this.o=this.q=this.n=this.p=this.i=this.f=this.ab=this.cb=this.h=this.g=this.Ya=this.Za=this.e=this.d=this.Ua=this.Wa=this.c=this.Ta=0;this.k=57328;this.sa=this.wb=this.l=0;this.na=this.P=this.O=j;this.ta=0;this.ga=j},call:function(b){b?(this.push(this.b+2),this.b=o(this,this.b),this.l-=7):this.b+=2},push:function(b,a){"undefined"===typeof a?(p(this,--this.k,b>>8),p(this,--this.k,b&255)):(p(this,--this.k,b),p(this,--this.k,a))},
page:function(b,a){var c,d;this.$[b]=a;switch(b){case 0:if(0!=(a&8)){c=(a&4)<<2;for(d=32;48>d;d++)this.D[d]=qa(this.Oa[c]),this.ca[d]=qa(this.Oa[c]),c++;this.xb=g}else{c=this.$[3]%this.da<<4;for(d=32;48>d;d++)this.D[d]=qa(this.V[c++]),this.ca[d]=Array(1024)}break;case 1:c=(a%this.da<<4)+1;for(d=1;16>d;d++)this.D[d]=qa(this.V[c++]);break;case 2:c=a%this.da<<4;for(d=16;32>d;d++)this.D[d]=qa(this.V[c++]);break;case 3:if(0==(this.$[0]&8)){c=a%this.da<<4;for(d=32;48>d;d++)this.D[d]=qa(this.V[c++])}}}};
function o(b,a){return b.D[a>>10][a&1023]&255|(b.D[++a>>10][a&1023]&255)<<8}function q(b){return b.D[b.b>>10][b.b&1023]}function r(b,a){return b.D[a>>10][a&1023]&255}function p(b,a,c){b.ca[a>>10][a&1023]=c;65532<=a&&b.page(a&3,c)}function ma(b,a){a!=h&&(b.V=a);b.$[0]=0;b.$[1]=0;b.$[2]=1;b.$[3]=0;if(b.V!=h){b.da=b.V.length/16;for(var c=0;48>c;c++)b.D[c]=qa(b.V[c&31]),b.ca[c]=Array(1024);for(c=48;64>c;c++)b.D[c]=b.gb[c&7],b.ca[c]=b.gb[c&7]}else b.da=0}
function xa(b){var a=g,c;for(c=0;8>c;c++)0!=(b&1<<c)&&(a=!a);return a}function ya(b,a){var c=b.i<<8|b.f,d=c-a-(b.a&1);b.a=(c^d^a)>>8&16|2|d>>16&1|d>>8&128|(0!=(d&65535)?0:64)|((a^c)&(c^d)&32768)>>13;b.i=d>>8&255;b.f=d&255}function za(b,a){var c=b.i<<8|b.f,d=c+a+(b.a&1);b.a=(c^d^a)>>8&16|d>>16&1|d>>8&128|(0!=(d&65535)?0:64)|((a^c^32768)&(a^d)&32768)>>13;b.i=d>>8&255;b.f=d&255}function v(b,a,c){var d=a+c;b.a=b.a&196|(a^d^c)>>8&16|d>>16&1;return d&65535}
function w(b,a){a=a-1&255;b.a=b.a&1|b.X[a];return a}function z(b,a){a=a+1&255;b.a=b.a&1|b.Y[a];return a}function B(b){b.f=b.f-1&255;255==b.f&&(b.i=b.i-1&255)}function Ba(b){b.g=b.g-1&255;255==b.g&&(b.h=b.h-1&255)}function C(b){b.d=b.d-1&255;255==b.d&&(b.e=b.e-1&255)}function D(b){b.f=b.f+1&255;0==b.f&&(b.i=b.i+1&255)}function Ca(b){b.g=b.g+1&255;0==b.g&&(b.h=b.h+1&255)}function Da(b,a){b.q=a>>8;b.o=a&255}function Ea(b,a){b.p=a>>8;b.n=a&255}function Fa(b,a){b.i=a>>8;b.f=a&255}
function E(b){return b.q<<8|b.o}function G(b){return b.p<<8|b.n}function H(b){return b.i<<8|b.f}function I(b){return b.h<<8|b.g}function J(b){return b.e<<8|b.d}function K(b,a){b.a=b.u[b.c<<8|b.c-a&255]}function L(b,a){var c=b.a&1,d=b.c-a-c&255;b.a=b.u[c<<16|b.c<<8|d];b.c=d}function l(b,a){var c=b.c-a&255;b.a=b.u[b.c<<8|c];b.c=c}function M(b,a){var c=b.a&1,d=b.c+a+c&255;b.a=b.v[c<<16|b.c<<8|d];b.c=d}function n(b,a){var c=b.c+a&255;b.a=b.v[b.c<<8|c];b.c=c}
function Ga(b,a){var c=a+q(b)&65535,d=r(b,++b.b);b.l-=va[d];switch(d){case 6:p(b,c,N(b,r(b,c)));break;case 14:p(b,c,O(b,r(b,c)));break;case 22:p(b,c,P(b,r(b,c)));break;case 30:p(b,c,Q(b,r(b,c)));break;case 38:p(b,c,R(b,r(b,c)));break;case 46:p(b,c,S(b,r(b,c)));break;case 54:p(b,c,T(b,r(b,c)));break;case 62:p(b,c,U(b,r(b,c)));break;case 70:V(b,r(b,c)&1);break;case 78:V(b,r(b,c)&2);break;case 86:V(b,r(b,c)&4);break;case 94:V(b,r(b,c)&8);break;case 102:V(b,r(b,c)&16);break;case 110:V(b,r(b,c)&32);break;
case 118:V(b,r(b,c)&64);break;case 126:V(b,r(b,c)&128);break;case 134:p(b,c,r(b,c)&-2);break;case 142:p(b,c,r(b,c)&-3);break;case 150:p(b,c,r(b,c)&-5);break;case 158:p(b,c,r(b,c)&-9);break;case 166:p(b,c,r(b,c)&-17);break;case 174:p(b,c,r(b,c)&-33);break;case 182:p(b,c,r(b,c)&-65);break;case 190:p(b,c,r(b,c)&-129);break;case 198:p(b,c,r(b,c)|1);break;case 206:p(b,c,r(b,c)|2);break;case 214:p(b,c,r(b,c)|4);break;case 222:p(b,c,r(b,c)|8);break;case 230:p(b,c,r(b,c)|16);break;case 238:p(b,c,r(b,c)|32);
break;case 246:p(b,c,r(b,c)|64);break;case 254:p(b,c,r(b,c)|128)}b.b++}function V(b,a){b.a=b.a&1|b.oa[a]}function U(b,a){var c=a&1,a=a>>1&255;b.a=c|b.j[a];return a}function S(b,a){var c=a&1,a=a>>1|a&128;b.a=c|b.j[a];return a}function T(b,a){var c=(a&128)>>7,a=(a<<1|1)&255;b.a=c|b.j[a];return a}function R(b,a){var c=(a&128)>>7,a=a<<1&255;b.a=c|b.j[a];return a}function Q(b,a){var c=a&1,a=(a>>1|b.a<<7)&255;b.a=c|b.j[a];return a}
function P(b,a){var c=(a&128)>>7,a=(a<<1|b.a&1)&255;b.a=c|b.j[a];return a}function O(b,a){var c=a&1,a=(a>>1|a<<7)&255;b.a=c|b.j[a];return a}function N(b,a){var c=(a&128)>>7,a=(a<<1|a>>7)&255;b.a=c|b.j[a];return a}function Ha(b,a){p(b,a,w(b,r(b,a)))}function Ia(b,a){p(b,a,z(b,r(b,a)))}function W(b,a){a&&(b.b=o(b,b.k),b.k+=2,b.l-=6)}function Ja(b,a){if(a){var c=q(b)+1;b.b+=128>c?c:c-256;b.l-=5}else b.b++}function X(b,a){b.b=a?o(b,b.b):b.b+2}
function oa(b,a,c){b.l+=a;0!=a&&(b.wb=a);for(;b.l>c;){if(b.Q&&(a=b,a.O&&!a.na))(a.ga&&(a.b++,a.ga=j),a.O=a.P=j,a.Q=j,a.push(a.b),0==a.sa)?(a.b=0==a.ta||255==a.ta?56:a.ta,a.l-=13):1==a.sa?(a.b=56,a.l-=13):(a.b=o(a,(a.Ha<<8)+a.ta),a.l-=19);a=r(b,b.b++);b.na=j;b.l-=sa[a];switch(a){case 1:b.d=r(b,b.b++);b.e=r(b,b.b++);break;case 2:p(b,J(b),b.c);break;case 3:a=b;a.d=a.d+1&255;0==a.d&&(a.e=a.e+1&255);break;case 4:b.e=z(b,b.e);break;case 5:b.e=w(b,b.e);break;case 6:b.e=r(b,b.b++);break;case 7:var a=b,d=
a.c>>7;a.c=a.c<<1&255|d;a.a=a.a&236|d;break;case 8:a=b;d=a.c;a.c=a.Ta;a.Ta=d;d=a.a;a.a=a.$a;a.$a=d;break;case 9:Fa(b,v(b,H(b),J(b)));break;case 10:b.c=r(b,J(b));break;case 11:C(b);break;case 12:b.d=z(b,b.d);break;case 13:b.d=w(b,b.d);break;case 14:b.d=r(b,b.b++);break;case 15:a=b;d=a.c&1;a.c=a.c>>1|d<<7;a.a=a.a&236|d;break;case 16:b.e=b.e-1&255;Ja(b,0!=b.e);break;case 17:b.g=r(b,b.b++);b.h=r(b,b.b++);break;case 18:p(b,I(b),b.c);break;case 19:Ca(b);break;case 20:b.h=z(b,b.h);break;case 21:b.h=w(b,
b.h);break;case 22:b.h=r(b,b.b++);break;case 23:a=b;d=a.c>>7;a.c=(a.c<<1|a.a&1)&255;a.a=a.a&236|d;break;case 24:b.b+=q(b)+1;break;case 25:Fa(b,v(b,H(b),I(b)));break;case 26:b.c=r(b,I(b));break;case 27:Ba(b);break;case 28:b.g=z(b,b.g);break;case 29:b.g=w(b,b.g);break;case 30:b.g=r(b,b.b++);break;case 31:a=b;d=a.c&1;a.c=(a.c>>1|(a.a&1)<<7)&255;a.a=a.a&236|d;break;case 32:Ja(b,0==(b.a&64));break;case 33:b.f=r(b,b.b++);b.i=r(b,b.b++);break;case 34:a=o(b,b.b);p(b,a,b.f);p(b,++a,b.i);b.b+=2;break;case 35:D(b);
break;case 36:b.i=z(b,b.i);break;case 37:b.i=w(b,b.i);break;case 38:b.i=r(b,b.b++);break;case 39:a=b;d=a.Ra[a.c|(a.a&1)<<8|(a.a&2)<<8|(a.a&16)<<6];a.c=d&255;a.a=a.a&2|d>>8;break;case 40:Ja(b,0!=(b.a&64));break;case 41:Fa(b,v(b,H(b),H(b)));break;case 42:a=o(b,b.b);b.f=r(b,a);b.i=r(b,a+1);b.b+=2;break;case 43:B(b);break;case 44:b.f=z(b,b.f);break;case 45:b.f=w(b,b.f);break;case 46:b.f=r(b,b.b++);break;case 47:a=b;a.c^=255;a.a|=18;break;case 48:Ja(b,0==(b.a&1));break;case 49:b.k=o(b,b.b);b.b+=2;break;
case 50:p(b,o(b,b.b),b.c);b.b+=2;break;case 51:b.k++;break;case 52:Ia(b,H(b));break;case 53:Ha(b,H(b));break;case 54:p(b,H(b),r(b,b.b++));break;case 55:b.a|=1;b.a&=-3;b.a&=-17;break;case 56:Ja(b,0!=(b.a&1));break;case 57:Fa(b,v(b,H(b),b.k));break;case 58:b.c=r(b,o(b,b.b));b.b+=2;break;case 59:b.k--;break;case 60:b.c=z(b,b.c);break;case 61:b.c=w(b,b.c);break;case 62:b.c=r(b,b.b++);break;case 63:a=b;0!=(a.a&1)?(a.a&=-2,a.a|=16):(a.a|=1,a.a&=-17);a.a&=-3;break;case 65:b.e=b.d;break;case 66:b.e=b.h;break;
case 67:b.e=b.g;break;case 68:b.e=b.i;break;case 69:b.e=b.f;break;case 70:b.e=r(b,H(b));break;case 71:b.e=b.c;break;case 72:b.d=b.e;break;case 74:b.d=b.h;break;case 75:b.d=b.g;break;case 76:b.d=b.i;break;case 77:b.d=b.f;break;case 78:b.d=r(b,H(b));break;case 79:b.d=b.c;break;case 80:b.h=b.e;break;case 81:b.h=b.d;break;case 83:b.h=b.g;break;case 84:b.h=b.i;break;case 85:b.h=b.f;break;case 86:b.h=r(b,H(b));break;case 87:b.h=b.c;break;case 88:b.g=b.e;break;case 89:b.g=b.d;break;case 90:b.g=b.h;break;
case 92:b.g=b.i;break;case 93:b.g=b.f;break;case 94:b.g=r(b,H(b));break;case 95:b.g=b.c;break;case 96:b.i=b.e;break;case 97:b.i=b.d;break;case 98:b.i=b.h;break;case 99:b.i=b.g;break;case 101:b.i=b.f;break;case 102:b.i=r(b,H(b));break;case 103:b.i=b.c;break;case 104:b.f=b.e;break;case 105:b.f=b.d;break;case 106:b.f=b.h;break;case 107:b.f=b.g;break;case 108:b.f=b.i;break;case 110:b.f=r(b,H(b));break;case 111:b.f=b.c;break;case 112:p(b,H(b),b.e);break;case 113:p(b,H(b),b.d);break;case 114:p(b,H(b),b.h);
break;case 115:p(b,H(b),b.g);break;case 116:p(b,H(b),b.i);break;case 117:p(b,H(b),b.f);break;case 118:b.ga=g;b.b--;break;case 119:p(b,H(b),b.c);break;case 120:b.c=b.e;break;case 121:b.c=b.d;break;case 122:b.c=b.h;break;case 123:b.c=b.g;break;case 124:b.c=b.i;break;case 125:b.c=b.f;break;case 126:b.c=r(b,H(b));break;case 128:n(b,b.e);break;case 129:n(b,b.d);break;case 130:n(b,b.h);break;case 131:n(b,b.g);break;case 132:n(b,b.i);break;case 133:n(b,b.f);break;case 134:n(b,r(b,H(b)));break;case 135:n(b,
b.c);break;case 136:M(b,b.e);break;case 137:M(b,b.d);break;case 138:M(b,b.h);break;case 139:M(b,b.g);break;case 140:M(b,b.i);break;case 141:M(b,b.f);break;case 142:M(b,r(b,H(b)));break;case 143:M(b,b.c);break;case 144:l(b,b.e);break;case 145:l(b,b.d);break;case 146:l(b,b.h);break;case 147:l(b,b.g);break;case 148:l(b,b.i);break;case 149:l(b,b.f);break;case 150:l(b,r(b,H(b)));break;case 151:l(b,b.c);break;case 152:L(b,b.e);break;case 153:L(b,b.d);break;case 154:L(b,b.h);break;case 155:L(b,b.g);break;
case 156:L(b,b.i);break;case 157:L(b,b.f);break;case 158:L(b,r(b,H(b)));break;case 159:L(b,b.c);break;case 160:b.a=b.j[b.c&=b.e]|16;break;case 161:b.a=b.j[b.c&=b.d]|16;break;case 162:b.a=b.j[b.c&=b.h]|16;break;case 163:b.a=b.j[b.c&=b.g]|16;break;case 164:b.a=b.j[b.c&=b.i]|16;break;case 165:b.a=b.j[b.c&=b.f]|16;break;case 166:b.a=b.j[b.c&=r(b,H(b))]|16;break;case 167:b.a=b.j[b.c]|16;break;case 168:b.a=b.j[b.c^=b.e];break;case 169:b.a=b.j[b.c^=b.d];break;case 170:b.a=b.j[b.c^=b.h];break;case 171:b.a=
b.j[b.c^=b.g];break;case 172:b.a=b.j[b.c^=b.i];break;case 173:b.a=b.j[b.c^=b.f];break;case 174:b.a=b.j[b.c^=r(b,H(b))];break;case 175:b.a=b.j[b.c=0];break;case 176:b.a=b.j[b.c|=b.e];break;case 177:b.a=b.j[b.c|=b.d];break;case 178:b.a=b.j[b.c|=b.h];break;case 179:b.a=b.j[b.c|=b.g];break;case 180:b.a=b.j[b.c|=b.i];break;case 181:b.a=b.j[b.c|=b.f];break;case 182:b.a=b.j[b.c|=r(b,H(b))];break;case 183:b.a=b.j[b.c];break;case 184:K(b,b.e);break;case 185:K(b,b.d);break;case 186:K(b,b.h);break;case 187:K(b,
b.g);break;case 188:K(b,b.i);break;case 189:K(b,b.f);break;case 190:K(b,r(b,H(b)));break;case 191:K(b,b.c);break;case 192:W(b,0==(b.a&64));break;case 193:a=b;d=o(b,b.k);a.e=d>>8;a.d=d&255;b.k+=2;break;case 194:X(b,0==(b.a&64));break;case 195:b.b=o(b,b.b);break;case 196:b.call(0==(b.a&64));break;case 197:b.push(b.e,b.d);break;case 198:n(b,r(b,b.b++));break;case 199:b.push(b.b);b.b=0;break;case 200:W(b,0!=(b.a&64));break;case 201:b.b=o(b,b.k);b.k+=2;break;case 202:X(b,0!=(b.a&64));break;case 203:a=
b;d=r(b,b.b++);a.l-=ta[d];switch(d){case 0:a.e=N(a,a.e);break;case 1:a.d=N(a,a.d);break;case 2:a.h=N(a,a.h);break;case 3:a.g=N(a,a.g);break;case 4:a.i=N(a,a.i);break;case 5:a.f=N(a,a.f);break;case 6:p(a,H(a),N(a,r(a,H(a))));break;case 7:a.c=N(a,a.c);break;case 8:a.e=O(a,a.e);break;case 9:a.d=O(a,a.d);break;case 10:a.h=O(a,a.h);break;case 11:a.g=O(a,a.g);break;case 12:a.i=O(a,a.i);break;case 13:a.f=O(a,a.f);break;case 14:p(a,H(a),O(a,r(a,H(a))));break;case 15:a.c=O(a,a.c);break;case 16:a.e=P(a,a.e);
break;case 17:a.d=P(a,a.d);break;case 18:a.h=P(a,a.h);break;case 19:a.g=P(a,a.g);break;case 20:a.i=P(a,a.i);break;case 21:a.f=P(a,a.f);break;case 22:p(a,H(a),P(a,r(a,H(a))));break;case 23:a.c=P(a,a.c);break;case 24:a.e=Q(a,a.e);break;case 25:a.d=Q(a,a.d);break;case 26:a.h=Q(a,a.h);break;case 27:a.g=Q(a,a.g);break;case 28:a.i=Q(a,a.i);break;case 29:a.f=Q(a,a.f);break;case 30:p(a,H(a),Q(a,r(a,H(a))));break;case 31:a.c=Q(a,a.c);break;case 32:a.e=R(a,a.e);break;case 33:a.d=R(a,a.d);break;case 34:a.h=
R(a,a.h);break;case 35:a.g=R(a,a.g);break;case 36:a.i=R(a,a.i);break;case 37:a.f=R(a,a.f);break;case 38:p(a,H(a),R(a,r(a,H(a))));break;case 39:a.c=R(a,a.c);break;case 40:a.e=S(a,a.e);break;case 41:a.d=S(a,a.d);break;case 42:a.h=S(a,a.h);break;case 43:a.g=S(a,a.g);break;case 44:a.i=S(a,a.i);break;case 45:a.f=S(a,a.f);break;case 46:p(a,H(a),S(a,r(a,H(a))));break;case 47:a.c=S(a,a.c);break;case 48:a.e=T(a,a.e);break;case 49:a.d=T(a,a.d);break;case 50:a.h=T(a,a.h);break;case 51:a.g=T(a,a.g);break;case 52:a.i=
T(a,a.i);break;case 53:a.f=T(a,a.f);break;case 54:p(a,H(a),T(a,r(a,H(a))));break;case 55:a.c=T(a,a.c);break;case 56:a.e=U(a,a.e);break;case 57:a.d=U(a,a.d);break;case 58:a.h=U(a,a.h);break;case 59:a.g=U(a,a.g);break;case 60:a.i=U(a,a.i);break;case 61:a.f=P(a,a.f);break;case 62:p(a,H(a),U(a,r(a,H(a))));break;case 63:a.c=U(a,a.c);break;case 64:V(a,a.e&1);break;case 65:V(a,a.d&1);break;case 66:V(a,a.h&1);break;case 67:V(a,a.g&1);break;case 68:V(a,a.i&1);break;case 69:V(a,a.f&1);break;case 70:V(a,r(a,
H(a))&1);break;case 71:V(a,a.c&1);break;case 72:V(a,a.e&2);break;case 73:V(a,a.d&2);break;case 74:V(a,a.h&2);break;case 75:V(a,a.g&2);break;case 76:V(a,a.i&2);break;case 77:V(a,a.f&2);break;case 78:V(a,r(a,H(a))&2);break;case 79:V(a,a.c&2);break;case 80:V(a,a.e&4);break;case 81:V(a,a.d&4);break;case 82:V(a,a.h&4);break;case 83:V(a,a.g&4);break;case 84:V(a,a.i&4);break;case 85:V(a,a.f&4);break;case 86:V(a,r(a,H(a))&4);break;case 87:V(a,a.c&4);break;case 88:V(a,a.e&8);break;case 89:V(a,a.d&8);break;
case 90:V(a,a.h&8);break;case 91:V(a,a.g&8);break;case 92:V(a,a.i&8);break;case 93:V(a,a.f&8);break;case 94:V(a,r(a,H(a))&8);break;case 95:V(a,a.c&8);break;case 96:V(a,a.e&16);break;case 97:V(a,a.d&16);break;case 98:V(a,a.h&16);break;case 99:V(a,a.g&16);break;case 100:V(a,a.i&16);break;case 101:V(a,a.f&16);break;case 102:V(a,r(a,H(a))&16);break;case 103:V(a,a.c&16);break;case 104:V(a,a.e&32);break;case 105:V(a,a.d&32);break;case 106:V(a,a.h&32);break;case 107:V(a,a.g&32);break;case 108:V(a,a.i&32);
break;case 109:V(a,a.f&32);break;case 110:V(a,r(a,H(a))&32);break;case 111:V(a,a.c&32);break;case 112:V(a,a.e&64);break;case 113:V(a,a.d&64);break;case 114:V(a,a.h&64);break;case 115:V(a,a.g&64);break;case 116:V(a,a.i&64);break;case 117:V(a,a.f&64);break;case 118:V(a,r(a,H(a))&64);break;case 119:V(a,a.c&64);break;case 120:V(a,a.e&128);break;case 121:V(a,a.d&128);break;case 122:V(a,a.h&128);break;case 123:V(a,a.g&128);break;case 124:V(a,a.i&128);break;case 125:V(a,a.f&128);break;case 126:V(a,r(a,H(a))&
128);break;case 127:V(a,a.c&128);break;case 128:a.e&=-2;break;case 129:a.d&=-2;break;case 130:a.h&=-2;break;case 131:a.g&=-2;break;case 132:a.i&=-2;break;case 133:a.f&=-2;break;case 134:p(a,H(a),r(a,H(a))&-2);break;case 135:a.c&=-2;break;case 136:a.e&=-3;break;case 137:a.d&=-3;break;case 138:a.h&=-3;break;case 139:a.g&=-3;break;case 140:a.i&=-3;break;case 141:a.f&=-3;break;case 142:p(a,H(a),r(a,H(a))&-3);break;case 143:a.c&=-3;break;case 144:a.e&=-5;break;case 145:a.d&=-5;break;case 146:a.h&=-5;break;
case 147:a.g&=-5;break;case 148:a.i&=-5;break;case 149:a.f&=-5;break;case 150:p(a,H(a),r(a,H(a))&-5);break;case 151:a.c&=-5;break;case 152:a.e&=-9;break;case 153:a.d&=-9;break;case 154:a.h&=-9;break;case 155:a.g&=-9;break;case 156:a.i&=-9;break;case 157:a.f&=-9;break;case 158:p(a,H(a),r(a,H(a))&-9);break;case 159:a.c&=-9;break;case 160:a.e&=-17;break;case 161:a.d&=-17;break;case 162:a.h&=-17;break;case 163:a.g&=-17;break;case 164:a.i&=-17;break;case 165:a.f&=-17;break;case 166:p(a,H(a),r(a,H(a))&
-17);break;case 167:a.c&=-17;break;case 168:a.e&=-33;break;case 169:a.d&=-33;break;case 170:a.h&=-33;break;case 171:a.g&=-33;break;case 172:a.i&=-33;break;case 173:a.f&=-33;break;case 174:p(a,H(a),r(a,H(a))&-33);break;case 175:a.c&=-33;break;case 176:a.e&=-65;break;case 177:a.d&=-65;break;case 178:a.h&=-65;break;case 179:a.g&=-65;break;case 180:a.i&=-65;break;case 181:a.f&=-65;break;case 182:p(a,H(a),r(a,H(a))&-65);break;case 183:a.c&=-65;break;case 184:a.e&=-129;break;case 185:a.d&=-129;break;case 186:a.h&=
-129;break;case 187:a.g&=-129;break;case 188:a.i&=-129;break;case 189:a.f&=-129;break;case 190:p(a,H(a),r(a,H(a))&-129);break;case 191:a.c&=-129;break;case 192:a.e|=1;break;case 193:a.d|=1;break;case 194:a.h|=1;break;case 195:a.g|=1;break;case 196:a.i|=1;break;case 197:a.f|=1;break;case 198:p(a,H(a),r(a,H(a))|1);break;case 199:a.c|=1;break;case 200:a.e|=2;break;case 201:a.d|=2;break;case 202:a.h|=2;break;case 203:a.g|=2;break;case 204:a.i|=2;break;case 205:a.f|=2;break;case 206:p(a,H(a),r(a,H(a))|
2);break;case 207:a.c|=2;break;case 208:a.e|=4;break;case 209:a.d|=4;break;case 210:a.h|=4;break;case 211:a.g|=4;break;case 212:a.i|=4;break;case 213:a.f|=4;break;case 214:p(a,H(a),r(a,H(a))|4);break;case 215:a.c|=4;break;case 216:a.e|=8;break;case 217:a.d|=8;break;case 218:a.h|=8;break;case 219:a.g|=8;break;case 220:a.i|=8;break;case 221:a.f|=8;break;case 222:p(a,H(a),r(a,H(a))|8);break;case 223:a.c|=8;break;case 224:a.e|=16;break;case 225:a.d|=16;break;case 226:a.h|=16;break;case 227:a.g|=16;break;
case 228:a.i|=16;break;case 229:a.f|=16;break;case 230:p(a,H(a),r(a,H(a))|16);break;case 231:a.c|=16;break;case 232:a.e|=32;break;case 233:a.d|=32;break;case 234:a.h|=32;break;case 235:a.g|=32;break;case 236:a.i|=32;break;case 237:a.f|=32;break;case 238:p(a,H(a),r(a,H(a))|32);break;case 239:a.c|=32;break;case 240:a.e|=64;break;case 241:a.d|=64;break;case 242:a.h|=64;break;case 243:a.g|=64;break;case 244:a.i|=64;break;case 245:a.f|=64;break;case 246:p(a,H(a),r(a,H(a))|64);break;case 247:a.c|=64;break;
case 248:a.e|=128;break;case 249:a.d|=128;break;case 250:a.h|=128;break;case 251:a.g|=128;break;case 252:a.i|=128;break;case 253:a.f|=128;break;case 254:p(a,H(a),r(a,H(a))|128);break;case 255:a.c|=128}break;case 204:b.call(0!=(b.a&64));break;case 205:b.push(b.b+2);b.b=o(b,b.b);break;case 206:M(b,r(b,b.b++));break;case 207:b.push(b.b);b.b=8;break;case 208:W(b,0==(b.a&1));break;case 209:a=b;d=o(b,b.k);a.h=d>>8;a.g=d&255;b.k+=2;break;case 210:X(b,0==(b.a&1));break;case 211:Y(b.port,r(b,b.b++),b.c);break;
case 212:b.call(0==(b.a&1));break;case 213:b.push(b.h,b.g);break;case 214:l(b,r(b,b.b++));break;case 215:b.push(b.b);b.b=16;break;case 216:W(b,0!=(b.a&1));break;case 217:a=b;d=a.e;a.e=a.Ua;a.Ua=d;d=a.d;a.d=a.Wa;a.Wa=d;a=b;d=a.h;a.h=a.Ya;a.Ya=d;d=a.g;a.g=a.Za;a.Za=d;a=b;d=a.i;a.i=a.ab;a.ab=d;d=a.f;a.f=a.cb;a.cb=d;break;case 218:X(b,0!=(b.a&1));break;case 219:b.c=Z(b.port,r(b,b.b++));break;case 220:b.call(0!=(b.a&1));break;case 221:var a=b,d=r(b,b.b++),e=f,e=f;a.l-=ua[d];switch(d){case 9:Ea(a,v(a,G(a),
J(a)));break;case 25:Ea(a,v(a,G(a),I(a)));break;case 33:Ea(a,o(a,a.b));a.b+=2;break;case 34:e=o(a,a.b);p(a,e++,a.n);p(a,e,a.p);a.b+=2;break;case 35:a.n=a.n+1&255;0==a.n&&(a.p=a.p+1&255);break;case 36:a.p=z(a,a.p);break;case 37:a.p=w(a,a.p);break;case 38:a.p=r(a,a.b++);break;case 41:Ea(a,v(a,G(a),G(a)));break;case 42:e=o(a,a.b);a.n=r(a,e);a.p=r(a,++e);a.b+=2;break;case 43:a.n=a.n-1&255;255==a.n&&(a.p=a.p-1&255);break;case 44:a.n=z(a,a.n);break;case 45:a.n=w(a,a.n);break;case 46:a.n=r(a,a.b++);break;
case 52:Ia(a,G(a)+q(a));a.b++;break;case 53:Ha(a,G(a)+q(a));a.b++;break;case 54:p(a,G(a)+q(a),r(a,++a.b));a.b++;break;case 57:Ea(a,v(a,G(a),a.k));break;case 68:a.e=a.p;break;case 69:a.e=a.n;break;case 70:a.e=r(a,G(a)+q(a));a.b++;break;case 76:a.d=a.p;break;case 77:a.d=a.n;break;case 78:a.d=r(a,G(a)+q(a));a.b++;break;case 84:a.h=a.p;break;case 85:a.h=a.n;break;case 86:a.h=r(a,G(a)+q(a));a.b++;break;case 92:a.g=a.p;break;case 93:a.g=a.n;break;case 94:a.g=r(a,G(a)+q(a));a.b++;break;case 96:a.p=a.e;break;
case 97:a.p=a.d;break;case 98:a.p=a.h;break;case 99:a.p=a.g;break;case 100:break;case 101:a.p=a.n;break;case 102:a.i=r(a,G(a)+q(a));a.b++;break;case 103:a.p=a.c;break;case 104:a.n=a.e;break;case 105:a.n=a.d;break;case 106:a.n=a.h;break;case 107:a.n=a.g;break;case 108:a.n=a.p;break;case 109:break;case 110:a.f=r(a,G(a)+q(a));a.b++;break;case 111:a.n=a.c;break;case 112:p(a,G(a)+q(a),a.e);a.b++;break;case 113:p(a,G(a)+q(a),a.d);a.b++;break;case 114:p(a,G(a)+q(a),a.h);a.b++;break;case 115:p(a,G(a)+q(a),
a.g);a.b++;break;case 116:p(a,G(a)+q(a),a.i);a.b++;break;case 117:p(a,G(a)+q(a),a.f);a.b++;break;case 119:p(a,G(a)+q(a),a.c);a.b++;break;case 124:a.c=a.p;break;case 125:a.c=a.n;break;case 126:a.c=r(a,G(a)+q(a));a.b++;break;case 132:n(a,a.p);break;case 133:n(a,a.n);break;case 134:n(a,r(a,G(a)+q(a)));a.b++;break;case 140:M(a,a.p);break;case 141:M(a,a.n);break;case 142:M(a,r(a,G(a)+q(a)));a.b++;break;case 148:l(a,a.p);break;case 149:l(a,a.n);break;case 150:l(a,r(a,G(a)+q(a)));a.b++;break;case 156:L(a,
a.p);break;case 157:L(a,a.n);break;case 158:L(a,r(a,G(a)+q(a)));a.b++;break;case 164:a.a=a.j[a.c&=a.p]|16;break;case 165:a.a=a.j[a.c&=a.n]|16;break;case 166:a.a=a.j[a.c&=r(a,G(a)+q(a))]|16;a.b++;break;case 172:a.a=a.j[a.c^=a.p];break;case 173:a.a=a.j[a.c^=a.n];break;case 174:a.a=a.j[a.c^=r(a,G(a)+q(a))];a.b++;break;case 180:a.a=a.j[a.c|=a.p];break;case 181:a.a=a.j[a.c|=a.n];break;case 182:a.a=a.j[a.c|=r(a,G(a)+q(a))];a.b++;break;case 188:K(a,a.p);break;case 189:K(a,a.n);break;case 190:K(a,r(a,G(a)+
q(a)));a.b++;break;case 203:Ga(a,G(a));break;case 225:Ea(a,o(a,a.k));a.k+=2;break;case 227:e=G(a);Ea(a,o(a,a.k));p(a,a.k,e&255);p(a,a.k+1,e>>8);break;case 229:a.push(a.p,a.n);break;case 233:a.b=G(a);break;case 249:a.k=G(a);break;default:a.b--}break;case 222:L(b,r(b,b.b++));break;case 223:b.push(b.b);b.b=24;break;case 224:W(b,0==(b.a&4));break;case 225:Fa(b,o(b,b.k));b.k+=2;break;case 226:X(b,0==(b.a&4));break;case 227:a=b.i;b.i=r(b,b.k+1);p(b,b.k+1,a);a=b.f;b.f=r(b,b.k);p(b,b.k,a);break;case 228:b.call(0==
(b.a&4));break;case 229:b.push(b.i,b.f);break;case 230:b.a=b.j[b.c&=r(b,b.b++)]|16;break;case 231:b.push(b.b);b.b=32;break;case 232:W(b,0!=(b.a&4));break;case 233:b.b=H(b);break;case 234:X(b,0!=(b.a&4));break;case 235:a=b.h;b.h=b.i;b.i=a;a=b.g;b.g=b.f;b.f=a;break;case 236:b.call(0!=(b.a&4));break;case 237:var a=b,d=r(b,b.b),k=e=e=f,e=f;a.l-=wa[d];switch(d){case 64:a.e=Z(a.port,a.d);a.a=a.a&1|a.j[a.e];a.b++;break;case 65:Y(a.port,a.d,a.e);a.b++;break;case 66:ya(a,J(a));a.b++;break;case 67:e=o(a,a.b+
1);p(a,e++,a.d);p(a,e,a.e);a.b+=3;break;case 68:case 76:case 84:case 92:case 100:case 108:case 116:case 124:e=a.c;a.c=0;l(a,e);a.b++;break;case 69:case 77:case 85:case 93:case 101:case 109:case 117:case 125:a.b=o(a,a.k);a.k+=2;a.O=a.P;break;case 70:case 78:case 102:case 110:a.sa=0;a.b++;break;case 71:a.Ha=a.c;a.b++;break;case 72:a.d=Z(a.port,a.d);a.a=a.a&1|a.j[a.d];a.b++;break;case 73:Y(a.port,a.d,a.d);a.b++;break;case 74:za(a,J(a));a.b++;break;case 75:e=o(a,a.b+1);a.d=r(a,e++);a.e=r(a,e);a.b+=3;
break;case 79:a.ub=a.c;a.b++;break;case 80:a.h=Z(a.port,a.d);a.a=a.a&1|a.j[a.h];a.b++;break;case 81:Y(a.port,a.d,a.h);a.b++;break;case 82:ya(a,I(a));a.b++;break;case 83:e=o(a,a.b+1);p(a,e++,a.g);p(a,e,a.h);a.b+=3;break;case 86:case 118:a.sa=1;a.b++;break;case 87:a.c=a.Ha;a.a=a.a&1|a.za[a.c]|(a.P?4:0);a.b++;break;case 88:a.g=Z(a.port,a.d);a.a=a.a&1|a.j[a.g];a.b++;break;case 89:Y(a.port,a.d,a.g);a.b++;break;case 90:za(a,I(a));a.b++;break;case 91:e=o(a,a.b+1);a.g=r(a,e++);a.h=r(a,e);a.b+=3;break;case 95:a.c=
Math.round(255*Math.random());a.a=a.a&1|a.za[a.c]|(a.P?4:0);a.b++;break;case 96:a.i=Z(a.port,a.d);a.a=a.a&1|a.j[a.i];a.b++;break;case 97:Y(a.port,a.d,a.i);a.b++;break;case 98:ya(a,H(a));a.b++;break;case 99:e=o(a,a.b+1);p(a,e++,a.f);p(a,e,a.i);a.b+=3;break;case 103:e=H(a);k=r(a,e);p(a,e,k>>4|(a.c&15)<<4);a.c=a.c&240|k&15;a.a=a.a&1|a.j[a.c];a.b++;break;case 104:a.f=Z(a.port,a.d);a.a=a.a&1|a.j[a.f];a.b++;break;case 105:Y(a.port,a.d,a.f);a.b++;break;case 106:za(a,H(a));a.b++;break;case 107:e=o(a,a.b+
1);a.f=r(a,e++);a.i=r(a,e);a.b+=3;break;case 111:e=H(a);k=r(a,e);p(a,e,(k&15)<<4|a.c&15);a.c=a.c&240|k>>4;a.a=a.a&1|a.j[a.c];a.b++;break;case 113:Y(a.port,a.d,0);a.b++;break;case 114:ya(a,a.k);a.b++;break;case 115:e=o(a,a.b+1);p(a,e++,a.k&255);p(a,e,a.k>>8);a.b+=3;break;case 120:a.c=Z(a.port,a.d);a.a=a.a&1|a.j[a.c];a.b++;break;case 121:Y(a.port,a.d,a.c);a.b++;break;case 122:za(a,a.k);a.b++;break;case 123:a.k=o(a,o(a,a.b+1));a.b+=3;break;case 160:p(a,I(a),r(a,H(a)));Ca(a);D(a);C(a);a.a=a.a&193|(0!=
J(a)?4:0);a.b++;break;case 161:e=a.a&1|2;K(a,r(a,H(a)));D(a);C(a);e|=0==J(a)?0:4;a.a=a.a&248|e;a.b++;break;case 162:e=Z(a.port,a.d);p(a,H(a),e);a.e=w(a,a.e);D(a);a.a=128==(e&128)?a.a|2:a.a&-3;a.b++;break;case 163:e=r(a,H(a));Y(a.port,a.d,e);D(a);a.e=w(a,a.e);255<a.f+e?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=128==(e&128)?a.a|2:a.a&-3;a.b++;break;case 168:p(a,I(a),r(a,H(a)));Ba(a);B(a);C(a);a.a=a.a&193|(0!=J(a)?4:0);a.b++;break;case 169:e=a.a&1|2;K(a,r(a,H(a)));B(a);C(a);e|=0==J(a)?0:4;a.a=a.a&248|
e;a.b++;break;case 170:e=Z(a.port,a.d);p(a,H(a),e);a.e=w(a,a.e);B(a);a.a=0!=(e&128)?a.a|2:a.a&-3;a.b++;break;case 171:e=r(a,H(a));Y(a.port,a.d,e);B(a);a.e=w(a,a.e);255<a.f+e?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=128==(e&128)?a.a|2:a.a&-3;a.b++;break;case 176:p(a,I(a),r(a,H(a)));Ca(a);D(a);C(a);0!=J(a)?(a.a|=4,a.l-=5,a.b--):(a.a&=-5,a.b++);a.a&=-3;a.a&=-17;break;case 177:e=a.a&1|2;K(a,r(a,H(a)));D(a);C(a);e|=0==J(a)?0:4;0!=(e&4)&&0==(a.a&64)?(a.l-=5,a.b--):a.b++;a.a=a.a&248|e;break;case 178:e=Z(a.port,
a.d);p(a,H(a),e);a.e=w(a,a.e);D(a);0!=a.e?(a.l-=5,a.b--):a.b++;a.a=128==(e&128)?a.a|2:a.a&-3;break;case 179:e=r(a,H(a));Y(a.port,a.d,e);a.e=w(a,a.e);D(a);0!=a.e?(a.l-=5,a.b--):a.b++;255<a.f+e?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=0!=(e&128)?a.a|2:a.a&-3;break;case 184:p(a,I(a),r(a,H(a)));Ba(a);B(a);C(a);0!=J(a)?(a.a|=4,a.l-=5,a.b--):(a.a&=-5,a.b++);a.a&=-3;a.a&=-17;break;case 185:e=a.a&1|2;K(a,r(a,H(a)));B(a);C(a);e|=0==J(a)?0:4;0!=(e&4)&&0==(a.a&64)?(a.l-=5,a.b--):a.b++;a.a=a.a&248|e;break;case 186:e=
Z(a.port,a.d);p(a,H(a),e);a.e=w(a,a.e);B(a);0!=a.e?(a.l-=5,a.b--):a.b++;a.a=0!=(e&128)?a.a|2:a.a&-3;break;case 187:e=r(a,H(a));Y(a.port,a.d,e);a.e=w(a,a.e);B(a);0!=a.e?(a.l-=5,a.b--):a.b++;255<a.f+e?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=0!=(e&128)?a.a|2:a.a&-3;break;default:a.b++}break;case 238:b.a=b.j[b.c^=r(b,b.b++)];break;case 239:b.push(b.b);b.b=40;break;case 240:W(b,0==(b.a&128));break;case 241:b.a=r(b,b.k++);b.c=r(b,b.k++);break;case 242:X(b,0==(b.a&128));break;case 243:b.O=b.P=j;b.na=g;break;
case 244:b.call(0==(b.a&128));break;case 245:b.push(b.c,b.a);break;case 246:b.a=b.j[b.c|=r(b,b.b++)];break;case 247:b.push(b.b);b.b=48;break;case 248:W(b,0!=(b.a&128));break;case 249:b.k=H(b);break;case 250:X(b,0!=(b.a&128));break;case 251:b.O=b.P=b.na=g;break;case 252:b.call(0!=(b.a&128));break;case 253:a=b;d=r(b,b.b++);e=e=f;a.l-=ua[d];switch(d){case 9:Da(a,v(a,E(a),J(a)));break;case 25:Da(a,v(a,E(a),I(a)));break;case 33:Da(a,o(a,a.b));a.b+=2;break;case 34:e=o(a,a.b);p(a,e++,a.o);p(a,e,a.q);a.b+=
2;break;case 35:a.o=a.o+1&255;0==a.o&&(a.q=a.q+1&255);break;case 36:a.q=z(a,a.q);break;case 37:a.q=w(a,a.q);break;case 38:a.q=r(a,a.b++);break;case 41:Da(a,v(a,E(a),E(a)));break;case 42:e=o(a,a.b);a.o=r(a,e);a.q=r(a,++e);a.b+=2;break;case 43:a.o=a.o-1&255;255==a.o&&(a.q=a.q-1&255);break;case 44:a.o=z(a,a.o);break;case 45:a.o=w(a,a.o);break;case 46:a.o=r(a,a.b++);break;case 52:Ia(a,E(a)+q(a));a.b++;break;case 53:Ha(a,E(a)+q(a));a.b++;break;case 54:p(a,E(a)+q(a),r(a,++a.b));a.b++;break;case 57:Da(a,
v(a,E(a),a.k));break;case 68:a.e=a.q;break;case 69:a.e=a.o;break;case 70:a.e=r(a,E(a)+q(a));a.b++;break;case 76:a.d=a.q;break;case 77:a.d=a.o;break;case 78:a.d=r(a,E(a)+q(a));a.b++;break;case 84:a.h=a.q;break;case 85:a.h=a.o;break;case 86:a.h=r(a,E(a)+q(a));a.b++;break;case 92:a.g=a.q;break;case 93:a.g=a.o;break;case 94:a.g=r(a,E(a)+q(a));a.b++;break;case 96:a.q=a.e;break;case 97:a.q=a.d;break;case 98:a.q=a.h;break;case 99:a.q=a.g;break;case 100:break;case 101:a.q=a.o;break;case 102:a.i=r(a,E(a)+
q(a));a.b++;break;case 103:a.q=a.c;break;case 104:a.o=a.e;break;case 105:a.o=a.d;break;case 106:a.o=a.h;break;case 107:a.o=a.g;break;case 108:a.o=a.q;break;case 109:break;case 110:a.f=r(a,E(a)+q(a));a.b++;break;case 111:a.o=a.c;break;case 112:p(a,E(a)+q(a),a.e);a.b++;break;case 113:p(a,E(a)+q(a),a.d);a.b++;break;case 114:p(a,E(a)+q(a),a.h);a.b++;break;case 115:p(a,E(a)+q(a),a.g);a.b++;break;case 116:p(a,E(a)+q(a),a.i);a.b++;break;case 117:p(a,E(a)+q(a),a.f);a.b++;break;case 119:p(a,E(a)+q(a),a.c);
a.b++;break;case 124:a.c=a.q;break;case 125:a.c=a.o;break;case 126:a.c=r(a,E(a)+q(a));a.b++;break;case 132:n(a,a.q);break;case 133:n(a,a.o);break;case 134:n(a,r(a,E(a)+q(a)));a.b++;break;case 140:M(a,a.q);break;case 141:M(a,a.o);break;case 142:M(a,r(a,E(a)+q(a)));a.b++;break;case 148:l(a,a.q);break;case 149:l(a,a.o);break;case 150:l(a,r(a,E(a)+q(a)));a.b++;break;case 156:L(a,a.q);break;case 157:L(a,a.o);break;case 158:L(a,r(a,E(a)+q(a)));a.b++;break;case 164:a.a=a.j[a.c&=a.q]|16;break;case 165:a.a=
a.j[a.c&=a.o]|16;break;case 166:a.a=a.j[a.c&=r(a,E(a)+q(a))]|16;a.b++;break;case 172:a.a=a.j[a.c^=a.q];break;case 173:a.a=a.j[a.c^=a.o];break;case 174:a.a=a.j[a.c^=r(a,E(a)+q(a))];a.b++;break;case 180:a.a=a.j[a.c|=a.q];break;case 181:a.a=a.j[a.c|=a.o];break;case 182:a.a=a.j[a.c|=r(a,E(a)+q(a))];a.b++;break;case 188:K(a,a.q);break;case 189:K(a,a.o);break;case 190:K(a,r(a,E(a)+q(a)));a.b++;break;case 203:Ga(a,E(a));break;case 225:Da(a,o(a,a.k));a.k+=2;break;case 227:e=E(a);Da(a,o(a,a.k));p(a,a.k,e&
255);p(a,a.k+1,e>>8);break;case 229:a.push(a.q,a.o);break;case 233:a.b=E(a);break;case 249:a.k=E(a);break;default:a.b--}break;case 254:K(b,r(b,b.b++));break;case 255:b.push(b.b),b.b=56}}};function ea(b){this.m=b;this.Lb=this.Kb=this.fa=this.r=this.s=0;this.Jb=this.Ib=j}
ea.prototype={reset:function(){this.fa=this.r=this.s=255;this.Ka=j},keydown:function(b){switch(b.keyCode){case 38:this.s&=-2;break;case 40:this.s&=-3;break;case 37:this.s&=-5;break;case 39:this.s&=-9;break;case 88:this.s&=-17;break;case 90:this.s&=-33;break;case 13:this.m.aa?this.m.Ka=g:this.fa&=-129;break;case 104:this.r&=-2;break;case 98:this.r&=-3;break;case 100:this.r&=-5;break;case 102:this.r&=-9;break;case 103:this.r&=-17;break;case 105:this.r&=-33;break;case 97:this.r&=-65;break;default:return}b.preventDefault()},
keyup:function(b){switch(b.keyCode){case 38:this.s|=1;break;case 40:this.s|=2;break;case 37:this.s|=4;break;case 39:this.s|=8;break;case 88:this.s|=16;break;case 90:this.s|=32;break;case 13:this.m.aa||(this.fa|=128);break;case 104:this.r|=1;break;case 98:this.r|=2;break;case 100:this.r|=4;break;case 102:this.r|=8;break;case 103:this.r|=16;break;case 105:this.r|=32;break;case 97:this.r|=64;break;default:return}b.preventDefault()}};var la=Number.MIN_VALUE,Ka=[25,20,16,13,10,8,6,5,4,3,3,2,2,1,1,0];function ia(b){this.m=b;this.M=this.nb=0;this.B=Array(8);this.G=0;this.z=Array(4);this.J=Array(4);this.ea=Array(3);this.ka=16;this.U=32768;this.la=Array(4)}
ia.prototype={write:function(b){0!=(b&128)?(this.G=b>>4&7,this.B[this.G]=this.B[this.G]&1008|b&15):this.B[this.G]=0==this.G||2==this.G||4==this.G?this.B[this.G]&15|(b&63)<<4:b&15;switch(this.G){case 0:case 2:case 4:0==this.B[this.G]&&(this.B[this.G]=1);break;case 6:this.ka=16<<(this.B[6]&3),this.U=32768}},update:function(b,a){var c=[],d,e;for(d=0;d<a;d++){for(e=0;3>e;e++)this.la[e]=this.ea[e]!=la?Ka[this.B[(e<<1)+1]]*this.ea[e]>>8:Ka[this.B[(e<<1)+1]]*this.J[e];this.la[3]=Ka[this.B[7]]*(this.U&1)<<
1;e=this.la[0]+this.la[1]+this.la[2]+this.la[3];127<e?e=127:-128>e&&(e=-128);c[b+d]=e;this.M+=this.nb;var k=this.M>>8,i=k<<8;this.M-=i;this.z[0]-=k;this.z[1]-=k;this.z[2]-=k;this.z[3]=128==this.ka?this.z[2]:this.z[3]-k;for(e=0;3>e;e++){var m=this.z[e];if(0>=m){var t=this.B[e<<1];6<t?(this.ea[e]=(i-this.M+512*m<<8)*this.J[e]/(i+this.M),this.J[e]=-this.J[e]):(this.J[e]=1,this.ea[e]=la);this.z[e]+=t*(k/t+1)}else this.ea[e]=la}0>=this.z[3]&&(this.J[3]=-this.J[3],128!=this.ka&&(this.z[3]+=this.ka*(k/this.ka+
1)),1==this.J[3]&&(this.U=this.U>>1|(0!=(this.B[6]&4)?0!=(this.U&9)&&0!=(this.U&9^9)?1:0:this.U&1)<<15))}return c}};function ha(b){this.m=b;this.lb=0;this.A=Array(16384);this.H=Array(32);for(b=0;32>b;b++)this.H[b]=0;this.t=Array(16);this.status=0;this.Z=j;this.ra=this.ha=this.La=this.va=this.location=this.N=0;this.pa=Array(256);this.W=Array(256);this.kb=this.Va=0;this.display=Array(49152);this.Ja=[];this.ya=[];this.Sa=[];this.I=this.bb=this.Ga=0;this.R=j;this.ia=Array(192);for(b=0;192>b;b++)this.ia[b]=Array(25);this.Pa=Array(512);this.ua=Array(512);for(b=this.ba=this.ja=0;512>b;b++)this.Pa[b]=Array(64)}
ha.prototype={reset:function(){var b,a,c,d;if(this.m.aa&&!this.Ja.length){this.Ja=Array(64);for(b=0;64>b;b++)a=b&3,c=b>>2&3,d=b>>4&3,this.Ja[b]=85*a|85*c<<8|85*d<<16}else if(this.m.S&&!this.ya.length){this.ya=Array(256);this.Sa=Array(16);for(b=0;256>b;b++)c=b&15,d=b>>4&15,this.ya[b]=d<<12|d<<8|c<<4|c;for(b=0;16>b;b++)this.Sa[b]=b<<20}this.Z=g;for(b=this.va=this.status=this.ra=this.location=0;16>b;b++)this.t[b]=0;this.t[2]=14;this.t[5]=126;this.kb=0;this.m.C.Q=j;this.R=g;this.ja=512;this.ba=-1;for(b=
0;16384>b;b++)this.A[b]=0;for(b=0;49152>b;b++)this.display[b]=0}};function La(b){b.Va=(b.t[2]&14)<<10;b.ja=0;b.ba=511;for(var a=0,c=b.ua.length;a<c;a++)b.ua[a]=g;b.I=(b.t[5]&-130)<<7;b.R=g};function da(b){this.m=b;this.enable=ba();this.updateStatus=ba();this.Gb=ba();this.yb=ba()}
"undefined"!==typeof $&&($.fn.zb=function(b){function a(a){this.m=a;var e=this,a=$("<div></div>"),k=$('<div class="roms"></div>'),i=$('<div class="controls"></div>'),m=ra(["fullscreenEnabled","mozFullScreenEnabled","webkitCancelFullScreen"]);this.sb=ra(["hidden","mozHidden","webkitHidden","msHidden"]);this.screen=$('<canvas width=256 height=192 class="screen"></canvas>');this.qa=this.screen[0].getContext("2d");this.qa.getImageData?(this.Ca=this.qa.getImageData(0,0,256,192),this.Eb(),this.ma=$("<select></select>").appendTo(k),
this.ma.change(function(){e.fb();e.F.start.removeAttr("disabled")}),this.F={start:$('<input type="button" value="Stop" class="btn" disabled="disabled">').appendTo(i),vb:$('<input type="button" value="Restart" class="btn" disabled="disabled">').appendTo(i),jb:$('<input type="button" value="Enable sound" class="btn" disabled="disabled">').appendTo(i),zoom:$('<input type="button" value="Zoom in" class="btn">').appendTo(i)},m&&$('<input type="button" value="Go fullscreen" class="btn">').appendTo(i).click(function(){var a=
e.screen[0];a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}),this.log=$('<div id="status"></div>'),this.F.start.click(function(){e.m.Ia?(e.m.stop(),e.updateStatus("Paused"),e.F.start.attr("value","Start")):(e.m.start(),e.F.start.attr("value","Stop"))}),this.F.vb.click(function(){""!==e.m.hb&&""!==e.m.ib&&pa(e.m,e.m.hb,e.m.ib)?(e.m.reset(),La(e.m.w),e.m.start()):$(this).attr("disabled","disabled")}),
this.F.jb.click(ba()),this.mb=j,this.F.zoom.click(function(){e.mb?(e.screen.animate({width:"256px",height:"192px"},function(){$(this).removeAttr("style")}),e.F.zoom.attr("value","Zoom in")):(e.screen.animate({width:"512px",height:"384px"}),e.F.zoom.attr("value","Zoom out"));e.mb=!e.mb}),this.screen.appendTo(a),k.appendTo(a),i.appendTo(a),this.log.appendTo(a),a.appendTo($(c)),"undefined"!=typeof b&&this.Fb(b),$(document).bind("keydown",function(a){e.m.T.keydown(a)}).bind("keyup",function(a){e.m.T.keyup(a)})):
$(c).html('<div class="alert-message error"><p><strong>Oh no!</strong> Your browser doesn\'t support writing pixels directly to the <code>&lt;canvas&gt;</code> tag. Try the latest versions of Firefox, Google Chrome, Opera or Safari!</p></div>')}var c=this;a.prototype={reset:function(){this.screen[0].width=256;this.screen[0].height=192;this.log.text("")},Eb:function(){this.qa.fillStyle="black";this.qa.fillRect(0,0,256,192);for(var a=3;a<=this.Ca.data.length-3;a+=4)this.Ca.data[a]=255},Fb:function(a){this.ma.children().remove();
$("<option>Select a ROM...</option>").appendTo(this.ma);for(var b in a)if(a.hasOwnProperty(b)){for(var c=$("<optgroup></optgroup>").attr("label",b),i=a[b].length,m=0;m<i;m++)$("<option>"+a[b][m][0]+"</option>").attr("value",a[b][m][1]).appendTo(c);this.ma.append(c)}},fb:function(){var a=this;this.updateStatus("Downloading...");$.ajax({url:escape(this.ma.val()),xhr:function(){var b=$.ajaxSettings.xhr();"undefined"!==typeof b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined");
return a.xhr=b},complete:function(b){pa(a.m,b.responseText,a.ma.val());a.m.reset();La(a.m.w);a.m.start();a.enable()}})},enable:function(){this.F.vb.removeAttr("disabled");this.m.Na?this.F.jb.attr("value","Disable sound"):this.F.jb.attr("value","Enable sound")},updateStatus:function(a){this.log.text(a)},Gb:ba(),yb:function(a){if(!this.sb||!document[this.sb]){var b=this.Ca.data,c,i,m;for(i=0;49152>=i;i++)c=a[i],m=4*i,b[m]=c&255,b[m+1]=c>>8&255,b[m+2]=c>>16&255;this.qa.putImageData(this.Ca,0,0)}}};return a});function ja(b){this.m=b;this.w=b.w;this.wa=b.wa;this.T=b.T;this.qb=64;this.Db=0;this.K=[]}ja.prototype={reset:function(){this.K=Array(2)}};
function Z(b,a){if(b.m.S&&7>a)switch(a){case 0:return b.T.fa&191|b.qb;case 1:case 2:case 3:case 4:case 5:return 0;case 6:return 255}switch(a&193){case 64:var c;a:{c=b.w;if(0==c.lb){if(218<c.ha){c=c.ha-6;break a}}else if(242<c.ha){c=c.ha-57;break a}c=c.ha}return c;case 65:return b.Db;case 128:c=b.w;c.Z=g;var d=c.La;c.La=c.A[c.location++&16383]&255;return d;case 129:return c=b.w,c.Z=g,d=c.status,c.status=0,c.m.C.Q=j,d;case 192:return b.T.s;case 193:return b.T.r&63|b.K[0]|b.K[1]}return 255}
function Y(b,a,c){if(!(b.m.S&&7>a))switch(a&193){case 1:b.K[0]=(c&32)<<1;b.K[1]=c&128;0==b.qb&&(b.K[0]=~b.K[0],b.K[1]=~b.K[1]);break;case 128:b=b.w;b.Z=g;switch(b.va){case 0:case 1:case 2:a=b.location&16383;if(c!=(b.A[a]&255)){if(a>=b.I&&a<b.I+64)b.R=g;else if(a>=b.I+128&&a<b.I+256)b.R=g;else{var d=a>>5;b.ua[d]=g;d<b.ja&&(b.ja=d);d>b.ba&&(b.ba=d)}b.A[a]=c}break;case 3:b.m.aa?b.H[b.location&31]=b.Ja[c&63]:b.m.S&&(b.H[(b.location&63)>>1]=0==(b.location&1)?b.ya[c]:b.H[(b.location&63)>>1]|b.Sa[c&15])}b.La=
c;b.location++;break;case 129:b=b.w;if(b.Z)b.Z=j,b.N=c,b.location=b.location&16128|c;else if(b.Z=g,b.va=c>>6&3,b.location=b.N|c<<8,0==b.va)b.La=b.A[b.location++&16383]&255;else if(2==b.va){c&=15;switch(c){case 0:0!=(b.status&4)&&(b.m.C.Q=0!=(b.N&16));break;case 1:0!=(b.status&128)&&0!=(b.N&32)&&(b.m.C.Q=g);(b.N&3)!=(b.t[c]&3)&&(b.R=g);break;case 2:b.Va=(b.N&14)<<10;break;case 5:a=b.I,b.I=(b.N&-130)<<7,a!=b.I&&(b.R=g)}b.t[c]=b.N}break;case 64:case 65:b.m.Na&&b.wa.write(c)}};window.JSSMS=ca;jQuery.fn.JSSMSUI=jQuery.fn.zb;
